/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/[...nextauth]/route";
exports.ids = ["app/api/auth/[...nextauth]/route"];
exports.modules = {

/***/ "(rsc)/./app/api/auth/[...nextauth]/route.ts":
/*!*********************************************!*\
  !*** ./app/api/auth/[...nextauth]/route.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/auth */ \"(rsc)/./auth.ts\");\n\nconst { GET, POST } = _auth__WEBPACK_IMPORTED_MODULE_0__.handlers;\n// Set runtime to nodejs for MongoDB compatibility\nconst runtime = \"nodejs\";\n// Add dynamic config for production and local environments\nconst dynamic = \"force-dynamic\"; // Don't cache auth responses \n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFrQztBQUUzQixNQUFNLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFLEdBQUdGLDJDQUFRQSxDQUFDO0FBRXRDLGtEQUFrRDtBQUMzQyxNQUFNRyxVQUFVLFNBQVM7QUFFaEMsMkRBQTJEO0FBQ3BELE1BQU1DLFVBQVUsZ0JBQWdCLENBQUMsOEJBQThCIiwic291cmNlcyI6WyIvVXNlcnMvbWFjYm9vay9EZXNrdG9wL3BlcnNvbmFsLXdvcmtzcGFjZS9jaXZpeC9hcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBoYW5kbGVycyB9IGZyb20gXCJAL2F1dGhcIjtcblxuZXhwb3J0IGNvbnN0IHsgR0VULCBQT1NUIH0gPSBoYW5kbGVycztcblxuLy8gU2V0IHJ1bnRpbWUgdG8gbm9kZWpzIGZvciBNb25nb0RCIGNvbXBhdGliaWxpdHlcbmV4cG9ydCBjb25zdCBydW50aW1lID0gXCJub2RlanNcIjtcblxuLy8gQWRkIGR5bmFtaWMgY29uZmlnIGZvciBwcm9kdWN0aW9uIGFuZCBsb2NhbCBlbnZpcm9ubWVudHNcbmV4cG9ydCBjb25zdCBkeW5hbWljID0gXCJmb3JjZS1keW5hbWljXCI7IC8vIERvbid0IGNhY2hlIGF1dGggcmVzcG9uc2VzICJdLCJuYW1lcyI6WyJoYW5kbGVycyIsIkdFVCIsIlBPU1QiLCJydW50aW1lIiwiZHluYW1pYyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/[...nextauth]/route.ts\n");

/***/ }),

/***/ "(rsc)/./auth.ts":
/*!*****************!*\
  !*** ./auth.ts ***!
  \*****************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   enhancedSignOut: () => (/* binding */ enhancedSignOut),\n/* harmony export */   handlers: () => (/* binding */ handlers),\n/* harmony export */   logUserLogout: () => (/* binding */ logUserLogout),\n/* harmony export */   signIn: () => (/* binding */ signIn),\n/* harmony export */   signOut: () => (/* binding */ signOut)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/models/User */ \"(rsc)/./models/User.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/logger */ \"(rsc)/./lib/logger.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var _models_AuditLog__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/models/AuditLog */ \"(rsc)/./models/AuditLog.ts\");\n\n\n\n\n\n\n\n// Helper to get IP address from request\nfunction getIpAddress(req) {\n    return req?.headers?.['x-forwarded-for']?.toString() || req?.socket?.remoteAddress?.toString() || 'unknown';\n}\n// Helper to get user agent from request\nfunction getUserAgent(req) {\n    return req?.headers?.['user-agent']?.toString() || 'unknown';\n}\n// Create a logger instance\nconst authLogger = (0,_lib_logger__WEBPACK_IMPORTED_MODULE_4__.createNamespaceLogger)('auth');\n// Function to log user logout\nasync function logUserLogout(userId) {\n    try {\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n        await _models_AuditLog__WEBPACK_IMPORTED_MODULE_6__[\"default\"]?.create({\n            userId,\n            action: _models_AuditLog__WEBPACK_IMPORTED_MODULE_6__.AuditActions.LOGOUT\n        });\n    } catch (error) {\n    // Handle logout logging error silently\n    }\n}\n// Use AUTH_SECRET environment variable or fallback to NEXTAUTH_SECRET for compatibility\nconst authSecret = process.env.AUTH_SECRET || process.env.NEXTAUTH_SECRET;\nif (!authSecret) {\n    throw new Error(\"AUTH_SECRET or NEXTAUTH_SECRET environment variable is not set\");\n}\n// Determine the correct URL for authentication\nconst getBaseUrl = ()=>{\n    if (process.env.NEXTAUTH_URL) return process.env.NEXTAUTH_URL;\n    if (process.env.NEXT_PUBLIC_APP_URL) return process.env.NEXT_PUBLIC_APP_URL;\n    if (process.env.NEXT_PUBLIC_SITE_URL) return process.env.NEXT_PUBLIC_SITE_URL;\n    if (process.env.VERCEL_URL) return `https://${process.env.VERCEL_URL}`;\n    return \"http://localhost:3000\";\n};\n// Define auth options\nconst authConfig = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials, req) {\n                if (!credentials?.email || !credentials?.password) {\n                    authLogger.warn('Login attempt with missing credentials');\n                    return null;\n                }\n                try {\n                    // Connect to the database\n                    await (0,_lib_db__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n                    // Verify User model is available\n                    if (!_models_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n                        authLogger.error('User model is not available');\n                        return null;\n                    }\n                    // Find the user by email\n                    const user = await _models_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n                        email: credentials.email.toLowerCase().trim()\n                    });\n                    if (!user) {\n                        authLogger.warn('Login attempt with non-existent email', {\n                            email: credentials.email\n                        });\n                        return null;\n                    }\n                    if (!user.isActive) {\n                        // Log failed login attempt for inactive account\n                        try {\n                            await _models_AuditLog__WEBPACK_IMPORTED_MODULE_6__[\"default\"]?.create({\n                                userId: user._id,\n                                action: _models_AuditLog__WEBPACK_IMPORTED_MODULE_6__.AuditActions.LOGIN_FAILED,\n                                details: {\n                                    reason: 'Inactive account'\n                                },\n                                ipAddress: getIpAddress(req),\n                                userAgent: getUserAgent(req)\n                            });\n                        } catch (logError) {\n                        // Handle audit log error silently\n                        }\n                        authLogger.warn('Login attempt for inactive account', {\n                            email: credentials.email\n                        });\n                        return null;\n                    }\n                    // Verify user.password exists and is hashed\n                    if (!user.password) {\n                        authLogger.error('User found but password field is missing', {\n                            email: credentials.email,\n                            userId: user._id\n                        });\n                        return null;\n                    }\n                    // Verify password is properly hashed (bcrypt hashes start with $2a$, $2b$, or $2y$)\n                    if (!user.password.startsWith('$2a$') && !user.password.startsWith('$2b$') && !user.password.startsWith('$2y$')) {\n                        authLogger.error('User password is not properly hashed', {\n                            email: credentials.email,\n                            userId: user._id,\n                            passwordLength: user.password.length\n                        });\n                        return null;\n                    }\n                    // Compare password using bcrypt\n                    const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"].compare(credentials.password, user.password);\n                    // Log password comparison for debugging (only in debug mode)\n                    if (process.env.NEXTAUTH_DEBUG === 'true') {\n                        authLogger.debug('Password comparison', {\n                            email: credentials.email,\n                            passwordProvided: credentials.password ? 'yes' : 'no',\n                            userPasswordHash: user.password ? 'exists' : 'missing',\n                            passwordHashLength: user.password.length,\n                            isPasswordValid\n                        });\n                    }\n                    if (!isPasswordValid) {\n                        // Log failed login attempt due to invalid password\n                        try {\n                            await _models_AuditLog__WEBPACK_IMPORTED_MODULE_6__[\"default\"]?.create({\n                                userId: user._id,\n                                action: _models_AuditLog__WEBPACK_IMPORTED_MODULE_6__.AuditActions.LOGIN_FAILED,\n                                details: {\n                                    reason: 'Invalid password'\n                                },\n                                ipAddress: getIpAddress(req),\n                                userAgent: getUserAgent(req)\n                            });\n                        } catch (logError) {\n                        // Handle audit log error silently\n                        }\n                        authLogger.warn('Login attempt with invalid password', {\n                            email: credentials.email,\n                            userId: user._id,\n                            passwordHashLength: user.password.length\n                        });\n                        return null;\n                    }\n                    // Get the ID as string safely\n                    const userId = user._id ? user._id.toString() : \"\";\n                    // Update last login time\n                    await _models_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByIdAndUpdate(userId, {\n                        lastLogin: new Date()\n                    });\n                    // Log successful login\n                    try {\n                        await _models_AuditLog__WEBPACK_IMPORTED_MODULE_6__[\"default\"]?.create({\n                            userId: user._id,\n                            action: _models_AuditLog__WEBPACK_IMPORTED_MODULE_6__.AuditActions.LOGIN,\n                            ipAddress: getIpAddress(req),\n                            userAgent: getUserAgent(req)\n                        });\n                    } catch (logError) {\n                    // Handle audit log error silently\n                    }\n                    authLogger.info('User logged in successfully', {\n                        email: credentials.email,\n                        role: user.role\n                    });\n                    // Return the user without sensitive data\n                    return {\n                        id: userId,\n                        name: user.name,\n                        email: user.email,\n                        role: user.role\n                    };\n                } catch (error) {\n                    authLogger.error('Error during authorization', {\n                        error: error instanceof Error ? error.message : 'Unknown error',\n                        email: credentials.email\n                    });\n                    return null;\n                }\n            }\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, user }) {\n            // Initial sign in\n            if (user) {\n                token.id = user.id;\n                token.role = user.role;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token && session.user) {\n                session.user.id = token.id;\n                session.user.role = token.role;\n            }\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/login\",\n        signOut: \"/\",\n        error: \"/error\",\n        newUser: \"/register\",\n        verifyRequest: \"/verify-request\"\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    // Use AUTH_SECRET environment variable or fallback to NEXTAUTH_SECRET for compatibility\n    secret: authSecret,\n    // Enable debug messages only in development and when explicitly enabled\n    debug:  true && process.env.NEXTAUTH_DEBUG === 'true',\n    // Trust the host setting with built-in validation\n    trustHost: true,\n    // Logger for auth events\n    logger: {\n        error (error) {\n            authLogger.error(error.message || 'Unknown error', {\n                stack: error instanceof Error ? error.stack : undefined\n            });\n        },\n        warn (message) {\n            authLogger.warn(message);\n        },\n        debug (message, metadata) {\n            // Only log debug messages if explicitly enabled\n            if (process.env.NEXTAUTH_DEBUG === 'true') {\n                authLogger.debug(message, metadata || {});\n            }\n        }\n    }\n};\n// Create and export NextAuth\nconst { auth, handlers, signIn, signOut } = (0,next_auth__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(authConfig);\n// Wrap the original signOut to add audit logging\nconst originalSignOut = signOut;\nconst enhancedSignOut = async (...args)=>{\n    // Get current session to extract user ID\n    const session = await auth();\n    // Log the logout if we have a user ID\n    if (session?.user?.id) {\n        await logUserLogout(session.user.id);\n    }\n    // Call the original signOut function\n    return originalSignOut(...args);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBQ1Isd0VBQXdFO0lBQ3hFdUMsT0FBT3RDLEtBQXNDLElBQUlBLFFBQVFDLEdBQUcsQ0FBQ29DLGNBQWMsS0FBSztJQUNoRixrREFBa0Q7SUFDbER5QixXQUFXO0lBRVgseUJBQXlCO0lBQ3pCQyxRQUFRO1FBQ05qRSxPQUFNQSxLQUFLO1lBQ1ROLFdBQVdNLEtBQUssQ0FBQ0EsTUFBTW1ELE9BQU8sSUFBSSxpQkFBaUI7Z0JBQ2pEZSxPQUFPbEUsaUJBQWlCTSxRQUFRTixNQUFNa0UsS0FBSyxHQUFHQztZQUNoRDtRQUNGO1FBQ0E5QyxNQUFLOEIsT0FBTztZQUNWekQsV0FBVzJCLElBQUksQ0FBQzhCO1FBQ2xCO1FBQ0FYLE9BQU1XLE9BQU8sRUFBRWlCLFFBQVE7WUFDckIsZ0RBQWdEO1lBQ2hELElBQUlsRSxRQUFRQyxHQUFHLENBQUNvQyxjQUFjLEtBQUssUUFBUTtnQkFDekM3QyxXQUFXOEMsS0FBSyxDQUFDVyxTQUFTLFlBQXlDLENBQUM7WUFDdEU7UUFDRjtJQUNGO0FBQ0Y7QUFFQSw2QkFBNkI7QUFDdEIsTUFBTSxFQUFFa0IsSUFBSSxFQUFFQyxRQUFRLEVBQUViLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEdBQUcvRSxxREFBUUEsQ0FBQ2lDLFlBQVk7QUFFeEUsaURBQWlEO0FBQ2pELE1BQU0yRCxrQkFBa0JiO0FBQ2pCLE1BQU1jLGtCQUFrQixPQUFPLEdBQUdDO0lBQ3ZDLHlDQUF5QztJQUN6QyxNQUFNbEIsVUFBVSxNQUFNYztJQUV0QixzQ0FBc0M7SUFDdEMsSUFBSWQsU0FBU2pDLE1BQU00QixJQUFJO1FBQ3JCLE1BQU12RCxjQUFjNEQsUUFBUWpDLElBQUksQ0FBQzRCLEVBQUU7SUFDckM7SUFFQSxxQ0FBcUM7SUFDckMsT0FBT3FCLG1CQUFtQkU7QUFDNUIsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL21hY2Jvb2svRGVza3RvcC9wZXJzb25hbC13b3Jrc3BhY2UvY2l2aXgvYXV0aC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTmV4dEF1dGgsIHsgdHlwZSBEZWZhdWx0U2Vzc2lvbiB9IGZyb20gXCJuZXh0LWF1dGhcIjtcbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2NyZWRlbnRpYWxzXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiQC9tb2RlbHMvVXNlclwiO1xuaW1wb3J0IGNvbm5lY3REQiBmcm9tIFwiQC9saWIvZGJcIjtcbmltcG9ydCB7IGNyZWF0ZU5hbWVzcGFjZUxvZ2dlciB9IGZyb20gXCJAL2xpYi9sb2dnZXJcIjtcbmltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdGpzXCI7XG5pbXBvcnQgdHlwZSB7IE5leHRBdXRoQ29uZmlnIH0gZnJvbSBcIm5leHQtYXV0aFwiO1xuaW1wb3J0IEF1ZGl0TG9nLCB7IEF1ZGl0QWN0aW9ucyB9IGZyb20gXCJAL21vZGVscy9BdWRpdExvZ1wiO1xuaW1wb3J0IHsgSldUIH0gZnJvbSBcIm5leHQtYXV0aC9qd3RcIjtcblxuLy8gRXh0ZW5kIHRoZSBuZXh0LWF1dGggdHlwZXMgdG8gaW5jbHVkZSBvdXIgY3VzdG9tIHByb3BlcnRpZXNcbmRlY2xhcmUgbW9kdWxlIFwibmV4dC1hdXRoXCIge1xuICBpbnRlcmZhY2UgVXNlciB7XG4gICAgaWQ6IHN0cmluZztcbiAgICByb2xlOiBzdHJpbmc7XG4gIH1cbiAgXG4gIGludGVyZmFjZSBTZXNzaW9uIGV4dGVuZHMgRGVmYXVsdFNlc3Npb24ge1xuICAgIHVzZXI6IHtcbiAgICAgIGlkOiBzdHJpbmc7XG4gICAgICByb2xlOiBzdHJpbmc7XG4gICAgfSAmIERlZmF1bHRTZXNzaW9uW1widXNlclwiXVxuICB9XG59XG5cbi8vIEV4dGVuZCBKV1QgbW9kdWxlIHRvIGluY2x1ZGUgb3VyIGN1c3RvbSBwcm9wZXJ0aWVzXG5kZWNsYXJlIG1vZHVsZSBcIm5leHQtYXV0aC9qd3RcIiB7XG4gIGludGVyZmFjZSBKV1Qge1xuICAgIGlkPzogc3RyaW5nO1xuICAgIHJvbGU/OiBzdHJpbmc7XG4gIH1cbn1cblxuLy8gSGVscGVyIHRvIGdldCBJUCBhZGRyZXNzIGZyb20gcmVxdWVzdFxuZnVuY3Rpb24gZ2V0SXBBZGRyZXNzKHJlcTogeyBoZWFkZXJzPzogYW55OyBzb2NrZXQ/OiBhbnkgfSk6IHN0cmluZyB7XG4gIHJldHVybiByZXE/LmhlYWRlcnM/LlsneC1mb3J3YXJkZWQtZm9yJ10/LnRvU3RyaW5nKCkgfHwgXG4gICAgICAgICByZXE/LnNvY2tldD8ucmVtb3RlQWRkcmVzcz8udG9TdHJpbmcoKSB8fCBcbiAgICAgICAgICd1bmtub3duJztcbn1cblxuLy8gSGVscGVyIHRvIGdldCB1c2VyIGFnZW50IGZyb20gcmVxdWVzdFxuZnVuY3Rpb24gZ2V0VXNlckFnZW50KHJlcTogeyBoZWFkZXJzPzogYW55IH0pOiBzdHJpbmcge1xuICByZXR1cm4gcmVxPy5oZWFkZXJzPy5bJ3VzZXItYWdlbnQnXT8udG9TdHJpbmcoKSB8fCAndW5rbm93bic7XG59XG5cbi8vIENyZWF0ZSBhIGxvZ2dlciBpbnN0YW5jZVxuY29uc3QgYXV0aExvZ2dlciA9IGNyZWF0ZU5hbWVzcGFjZUxvZ2dlcignYXV0aCcpO1xuXG4vLyBGdW5jdGlvbiB0byBsb2cgdXNlciBsb2dvdXRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dVc2VyTG9nb3V0KHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgY29ubmVjdERCKCk7XG4gICAgYXdhaXQgQXVkaXRMb2c/LmNyZWF0ZSh7XG4gICAgICB1c2VySWQsXG4gICAgICBhY3Rpb246IEF1ZGl0QWN0aW9ucy5MT0dPVVQsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gSGFuZGxlIGxvZ291dCBsb2dnaW5nIGVycm9yIHNpbGVudGx5XG4gIH1cbn1cblxuLy8gVXNlIEFVVEhfU0VDUkVUIGVudmlyb25tZW50IHZhcmlhYmxlIG9yIGZhbGxiYWNrIHRvIE5FWFRBVVRIX1NFQ1JFVCBmb3IgY29tcGF0aWJpbGl0eVxuY29uc3QgYXV0aFNlY3JldCA9IHByb2Nlc3MuZW52LkFVVEhfU0VDUkVUIHx8IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVDtcbmlmICghYXV0aFNlY3JldCkge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJBVVRIX1NFQ1JFVCBvciBORVhUQVVUSF9TRUNSRVQgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbm90IHNldFwiKTtcbn1cblxuLy8gRGV0ZXJtaW5lIHRoZSBjb3JyZWN0IFVSTCBmb3IgYXV0aGVudGljYXRpb25cbmNvbnN0IGdldEJhc2VVcmwgPSAoKSA9PiB7XG4gIGlmIChwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkwpIHJldHVybiBwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkw7XG4gIGlmIChwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfVVJMKSByZXR1cm4gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTDtcbiAgaWYgKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NJVEVfVVJMKSByZXR1cm4gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU0lURV9VUkw7XG4gIGlmIChwcm9jZXNzLmVudi5WRVJDRUxfVVJMKSByZXR1cm4gYGh0dHBzOi8vJHtwcm9jZXNzLmVudi5WRVJDRUxfVVJMfWA7XG4gIHJldHVybiBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiO1xufTtcblxuLy8gRGVmaW5lIGF1dGggb3B0aW9uc1xuY29uc3QgYXV0aENvbmZpZzogTmV4dEF1dGhDb25maWcgPSB7XG4gIHByb3ZpZGVyczogW1xuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogXCJDcmVkZW50aWFsc1wiLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6IFwiRW1haWxcIiwgdHlwZTogXCJlbWFpbFwiIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiB9LFxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscywgcmVxKSB7XG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcbiAgICAgICAgICBhdXRoTG9nZ2VyLndhcm4oJ0xvZ2luIGF0dGVtcHQgd2l0aCBtaXNzaW5nIGNyZWRlbnRpYWxzJyk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gQ29ubmVjdCB0byB0aGUgZGF0YWJhc2VcbiAgICAgICAgICBhd2FpdCBjb25uZWN0REIoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBWZXJpZnkgVXNlciBtb2RlbCBpcyBhdmFpbGFibGVcbiAgICAgICAgICBpZiAoIVVzZXIpIHtcbiAgICAgICAgICAgIGF1dGhMb2dnZXIuZXJyb3IoJ1VzZXIgbW9kZWwgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZpbmQgdGhlIHVzZXIgYnkgZW1haWxcbiAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgZW1haWw6IChjcmVkZW50aWFscy5lbWFpbCBhcyBzdHJpbmcpLnRvTG93ZXJDYXNlKCkudHJpbSgpIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgYXV0aExvZ2dlci53YXJuKCdMb2dpbiBhdHRlbXB0IHdpdGggbm9uLWV4aXN0ZW50IGVtYWlsJywgeyBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwgfSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCF1c2VyLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAvLyBMb2cgZmFpbGVkIGxvZ2luIGF0dGVtcHQgZm9yIGluYWN0aXZlIGFjY291bnRcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGF3YWl0IEF1ZGl0TG9nPy5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIHVzZXJJZDogdXNlci5faWQsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBBdWRpdEFjdGlvbnMuTE9HSU5fRkFJTEVELFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgcmVhc29uOiAnSW5hY3RpdmUgYWNjb3VudCcgfSxcbiAgICAgICAgICAgICAgICBpcEFkZHJlc3M6IGdldElwQWRkcmVzcyhyZXEpLFxuICAgICAgICAgICAgICAgIHVzZXJBZ2VudDogZ2V0VXNlckFnZW50KHJlcSksXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBjYXRjaCAobG9nRXJyb3IpIHtcbiAgICAgICAgICAgICAgLy8gSGFuZGxlIGF1ZGl0IGxvZyBlcnJvciBzaWxlbnRseVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXV0aExvZ2dlci53YXJuKCdMb2dpbiBhdHRlbXB0IGZvciBpbmFjdGl2ZSBhY2NvdW50JywgeyBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwgfSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVmVyaWZ5IHVzZXIucGFzc3dvcmQgZXhpc3RzIGFuZCBpcyBoYXNoZWRcbiAgICAgICAgICBpZiAoIXVzZXIucGFzc3dvcmQpIHtcbiAgICAgICAgICAgIGF1dGhMb2dnZXIuZXJyb3IoJ1VzZXIgZm91bmQgYnV0IHBhc3N3b3JkIGZpZWxkIGlzIG1pc3NpbmcnLCB7IFxuICAgICAgICAgICAgICBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwsXG4gICAgICAgICAgICAgIHVzZXJJZDogdXNlci5faWQgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBWZXJpZnkgcGFzc3dvcmQgaXMgcHJvcGVybHkgaGFzaGVkIChiY3J5cHQgaGFzaGVzIHN0YXJ0IHdpdGggJDJhJCwgJDJiJCwgb3IgJDJ5JClcbiAgICAgICAgICBpZiAoIXVzZXIucGFzc3dvcmQuc3RhcnRzV2l0aCgnJDJhJCcpICYmICF1c2VyLnBhc3N3b3JkLnN0YXJ0c1dpdGgoJyQyYiQnKSAmJiAhdXNlci5wYXNzd29yZC5zdGFydHNXaXRoKCckMnkkJykpIHtcbiAgICAgICAgICAgIGF1dGhMb2dnZXIuZXJyb3IoJ1VzZXIgcGFzc3dvcmQgaXMgbm90IHByb3Blcmx5IGhhc2hlZCcsIHsgXG4gICAgICAgICAgICAgIGVtYWlsOiBjcmVkZW50aWFscy5lbWFpbCxcbiAgICAgICAgICAgICAgdXNlcklkOiB1c2VyLl9pZCxcbiAgICAgICAgICAgICAgcGFzc3dvcmRMZW5ndGg6IHVzZXIucGFzc3dvcmQubGVuZ3RoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDb21wYXJlIHBhc3N3b3JkIHVzaW5nIGJjcnlwdFxuICAgICAgICAgIGNvbnN0IGlzUGFzc3dvcmRWYWxpZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKFxuICAgICAgICAgICAgY3JlZGVudGlhbHMucGFzc3dvcmQgYXMgc3RyaW5nLFxuICAgICAgICAgICAgdXNlci5wYXNzd29yZCBhcyBzdHJpbmdcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIExvZyBwYXNzd29yZCBjb21wYXJpc29uIGZvciBkZWJ1Z2dpbmcgKG9ubHkgaW4gZGVidWcgbW9kZSlcbiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTkVYVEFVVEhfREVCVUcgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgYXV0aExvZ2dlci5kZWJ1ZygnUGFzc3dvcmQgY29tcGFyaXNvbicsIHtcbiAgICAgICAgICAgICAgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsLFxuICAgICAgICAgICAgICBwYXNzd29yZFByb3ZpZGVkOiBjcmVkZW50aWFscy5wYXNzd29yZCA/ICd5ZXMnIDogJ25vJyxcbiAgICAgICAgICAgICAgdXNlclBhc3N3b3JkSGFzaDogdXNlci5wYXNzd29yZCA/ICdleGlzdHMnIDogJ21pc3NpbmcnLFxuICAgICAgICAgICAgICBwYXNzd29yZEhhc2hMZW5ndGg6IHVzZXIucGFzc3dvcmQubGVuZ3RoLFxuICAgICAgICAgICAgICBpc1Bhc3N3b3JkVmFsaWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkge1xuICAgICAgICAgICAgLy8gTG9nIGZhaWxlZCBsb2dpbiBhdHRlbXB0IGR1ZSB0byBpbnZhbGlkIHBhc3N3b3JkXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhd2FpdCBBdWRpdExvZz8uY3JlYXRlKHtcbiAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXIuX2lkLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogQXVkaXRBY3Rpb25zLkxPR0lOX0ZBSUxFRCxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiB7IHJlYXNvbjogJ0ludmFsaWQgcGFzc3dvcmQnIH0sXG4gICAgICAgICAgICAgICAgaXBBZGRyZXNzOiBnZXRJcEFkZHJlc3MocmVxKSxcbiAgICAgICAgICAgICAgICB1c2VyQWdlbnQ6IGdldFVzZXJBZ2VudChyZXEpLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGxvZ0Vycm9yKSB7XG4gICAgICAgICAgICAgIC8vIEhhbmRsZSBhdWRpdCBsb2cgZXJyb3Igc2lsZW50bHlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF1dGhMb2dnZXIud2FybignTG9naW4gYXR0ZW1wdCB3aXRoIGludmFsaWQgcGFzc3dvcmQnLCB7IFxuICAgICAgICAgICAgICBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwsXG4gICAgICAgICAgICAgIHVzZXJJZDogdXNlci5faWQsXG4gICAgICAgICAgICAgIHBhc3N3b3JkSGFzaExlbmd0aDogdXNlci5wYXNzd29yZC5sZW5ndGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEdldCB0aGUgSUQgYXMgc3RyaW5nIHNhZmVseVxuICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IHVzZXIuX2lkID8gdXNlci5faWQudG9TdHJpbmcoKSA6IFwiXCI7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXBkYXRlIGxhc3QgbG9naW4gdGltZVxuICAgICAgICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUodXNlcklkLCB7IFxuICAgICAgICAgICAgbGFzdExvZ2luOiBuZXcgRGF0ZSgpIFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIExvZyBzdWNjZXNzZnVsIGxvZ2luXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IEF1ZGl0TG9nPy5jcmVhdGUoe1xuICAgICAgICAgICAgICB1c2VySWQ6IHVzZXIuX2lkLFxuICAgICAgICAgICAgICBhY3Rpb246IEF1ZGl0QWN0aW9ucy5MT0dJTixcbiAgICAgICAgICAgICAgaXBBZGRyZXNzOiBnZXRJcEFkZHJlc3MocmVxKSxcbiAgICAgICAgICAgICAgdXNlckFnZW50OiBnZXRVc2VyQWdlbnQocmVxKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGxvZ0Vycm9yKSB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgYXVkaXQgbG9nIGVycm9yIHNpbGVudGx5XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGF1dGhMb2dnZXIuaW5mbygnVXNlciBsb2dnZWQgaW4gc3VjY2Vzc2Z1bGx5JywgeyBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwsIHJvbGU6IHVzZXIucm9sZSB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBSZXR1cm4gdGhlIHVzZXIgd2l0aG91dCBzZW5zaXRpdmUgZGF0YVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdXNlcklkLFxuICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICByb2xlOiB1c2VyLnJvbGUsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBhdXRoTG9nZ2VyLmVycm9yKCdFcnJvciBkdXJpbmcgYXV0aG9yaXphdGlvbicsIHsgXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgICBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwgXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSksXG4gIF0sXG4gIGNhbGxiYWNrczoge1xuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyIH0pIHtcbiAgICAgIC8vIEluaXRpYWwgc2lnbiBpblxuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdG9rZW4uaWQgPSB1c2VyLmlkO1xuICAgICAgICB0b2tlbi5yb2xlID0gdXNlci5yb2xlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH0sXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIGlmICh0b2tlbiAmJiBzZXNzaW9uLnVzZXIpIHtcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gdG9rZW4uaWQgYXMgc3RyaW5nO1xuICAgICAgICBzZXNzaW9uLnVzZXIucm9sZSA9IHRva2VuLnJvbGUgYXMgc3RyaW5nO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfVxuICB9LFxuICBwYWdlczoge1xuICAgIHNpZ25JbjogXCIvbG9naW5cIixcbiAgICBzaWduT3V0OiBcIi9cIixcbiAgICBlcnJvcjogXCIvZXJyb3JcIixcbiAgICBuZXdVc2VyOiBcIi9yZWdpc3RlclwiLFxuICAgIHZlcmlmeVJlcXVlc3Q6IFwiL3ZlcmlmeS1yZXF1ZXN0XCIsXG4gIH0sXG4gIHNlc3Npb246IHtcbiAgICBzdHJhdGVneTogXCJqd3RcIixcbiAgICBtYXhBZ2U6IDMwICogMjQgKiA2MCAqIDYwLCAvLyAzMCBkYXlzXG4gIH0sXG4gIC8vIFVzZSBBVVRIX1NFQ1JFVCBlbnZpcm9ubWVudCB2YXJpYWJsZSBvciBmYWxsYmFjayB0byBORVhUQVVUSF9TRUNSRVQgZm9yIGNvbXBhdGliaWxpdHlcbiAgc2VjcmV0OiBhdXRoU2VjcmV0LFxuICAvLyBFbmFibGUgZGVidWcgbWVzc2FnZXMgb25seSBpbiBkZXZlbG9wbWVudCBhbmQgd2hlbiBleHBsaWNpdGx5IGVuYWJsZWRcbiAgZGVidWc6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIHByb2Nlc3MuZW52Lk5FWFRBVVRIX0RFQlVHID09PSAndHJ1ZScsXG4gIC8vIFRydXN0IHRoZSBob3N0IHNldHRpbmcgd2l0aCBidWlsdC1pbiB2YWxpZGF0aW9uXG4gIHRydXN0SG9zdDogdHJ1ZSxcbiAgXG4gIC8vIExvZ2dlciBmb3IgYXV0aCBldmVudHNcbiAgbG9nZ2VyOiB7XG4gICAgZXJyb3IoZXJyb3IpIHtcbiAgICAgIGF1dGhMb2dnZXIuZXJyb3IoZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcicsIHsgXG4gICAgICAgIHN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQgXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHdhcm4obWVzc2FnZSkge1xuICAgICAgYXV0aExvZ2dlci53YXJuKG1lc3NhZ2UpO1xuICAgIH0sXG4gICAgZGVidWcobWVzc2FnZSwgbWV0YWRhdGEpIHtcbiAgICAgIC8vIE9ubHkgbG9nIGRlYnVnIG1lc3NhZ2VzIGlmIGV4cGxpY2l0bHkgZW5hYmxlZFxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5FWFRBVVRIX0RFQlVHID09PSAndHJ1ZScpIHtcbiAgICAgICAgYXV0aExvZ2dlci5kZWJ1ZyhtZXNzYWdlLCAobWV0YWRhdGEgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIHx8IHt9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8vIENyZWF0ZSBhbmQgZXhwb3J0IE5leHRBdXRoXG5leHBvcnQgY29uc3QgeyBhdXRoLCBoYW5kbGVycywgc2lnbkluLCBzaWduT3V0IH0gPSBOZXh0QXV0aChhdXRoQ29uZmlnKTtcblxuLy8gV3JhcCB0aGUgb3JpZ2luYWwgc2lnbk91dCB0byBhZGQgYXVkaXQgbG9nZ2luZ1xuY29uc3Qgb3JpZ2luYWxTaWduT3V0ID0gc2lnbk91dDtcbmV4cG9ydCBjb25zdCBlbmhhbmNlZFNpZ25PdXQgPSBhc3luYyAoLi4uYXJnczogUGFyYW1ldGVyczx0eXBlb2Ygc2lnbk91dD4pID0+IHtcbiAgLy8gR2V0IGN1cnJlbnQgc2Vzc2lvbiB0byBleHRyYWN0IHVzZXIgSURcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGF1dGgoKTtcbiAgXG4gIC8vIExvZyB0aGUgbG9nb3V0IGlmIHdlIGhhdmUgYSB1c2VyIElEXG4gIGlmIChzZXNzaW9uPy51c2VyPy5pZCkge1xuICAgIGF3YWl0IGxvZ1VzZXJMb2dvdXQoc2Vzc2lvbi51c2VyLmlkKTtcbiAgfVxuICBcbiAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgc2lnbk91dCBmdW5jdGlvblxuICByZXR1cm4gb3JpZ2luYWxTaWduT3V0KC4uLmFyZ3MpO1xufTsgIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiQ3JlZGVudGlhbHNQcm92aWRlciIsIlVzZXIiLCJjb25uZWN0REIiLCJjcmVhdGVOYW1lc3BhY2VMb2dnZXIiLCJiY3J5cHQiLCJBdWRpdExvZyIsIkF1ZGl0QWN0aW9ucyIsImdldElwQWRkcmVzcyIsInJlcSIsImhlYWRlcnMiLCJ0b1N0cmluZyIsInNvY2tldCIsInJlbW90ZUFkZHJlc3MiLCJnZXRVc2VyQWdlbnQiLCJhdXRoTG9nZ2VyIiwibG9nVXNlckxvZ291dCIsInVzZXJJZCIsImNyZWF0ZSIsImFjdGlvbiIsIkxPR09VVCIsImVycm9yIiwiYXV0aFNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJBVVRIX1NFQ1JFVCIsIk5FWFRBVVRIX1NFQ1JFVCIsIkVycm9yIiwiZ2V0QmFzZVVybCIsIk5FWFRBVVRIX1VSTCIsIk5FWFRfUFVCTElDX0FQUF9VUkwiLCJORVhUX1BVQkxJQ19TSVRFX1VSTCIsIlZFUkNFTF9VUkwiLCJhdXRoQ29uZmlnIiwicHJvdmlkZXJzIiwibmFtZSIsImNyZWRlbnRpYWxzIiwiZW1haWwiLCJsYWJlbCIsInR5cGUiLCJwYXNzd29yZCIsImF1dGhvcml6ZSIsIndhcm4iLCJ1c2VyIiwiZmluZE9uZSIsInRvTG93ZXJDYXNlIiwidHJpbSIsImlzQWN0aXZlIiwiX2lkIiwiTE9HSU5fRkFJTEVEIiwiZGV0YWlscyIsInJlYXNvbiIsImlwQWRkcmVzcyIsInVzZXJBZ2VudCIsImxvZ0Vycm9yIiwic3RhcnRzV2l0aCIsInBhc3N3b3JkTGVuZ3RoIiwibGVuZ3RoIiwiaXNQYXNzd29yZFZhbGlkIiwiY29tcGFyZSIsIk5FWFRBVVRIX0RFQlVHIiwiZGVidWciLCJwYXNzd29yZFByb3ZpZGVkIiwidXNlclBhc3N3b3JkSGFzaCIsInBhc3N3b3JkSGFzaExlbmd0aCIsImZpbmRCeUlkQW5kVXBkYXRlIiwibGFzdExvZ2luIiwiRGF0ZSIsIkxPR0lOIiwiaW5mbyIsInJvbGUiLCJpZCIsIm1lc3NhZ2UiLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsInNlc3Npb24iLCJwYWdlcyIsInNpZ25JbiIsInNpZ25PdXQiLCJuZXdVc2VyIiwidmVyaWZ5UmVxdWVzdCIsInN0cmF0ZWd5IiwibWF4QWdlIiwic2VjcmV0IiwidHJ1c3RIb3N0IiwibG9nZ2VyIiwic3RhY2siLCJ1bmRlZmluZWQiLCJtZXRhZGF0YSIsImF1dGgiLCJoYW5kbGVycyIsIm9yaWdpbmFsU2lnbk91dCIsImVuaGFuY2VkU2lnbk91dCIsImFyZ3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   disconnectDB: () => (/* binding */ disconnectDB),\n/* harmony export */   getConnectionStatus: () => (/* binding */ getConnectionStatus)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./logger */ \"(rsc)/./lib/logger.ts\");\n\n\n// ---\n// CIVIX AGENT MODE: Bulletproof MongoDB Connection for Next.js\n// 1. Always await connectDB() in every API/server function before DB ops!\n// 2. Write/seed data to make DB appear in Compass.\n// 3. .env.local: MONGODB_URI=mongodb://localhost:27017/civix_fInal_production\n// 4. Add logs before/after DB ops for visibility.\n// ---\nconst dbLogger = (0,_logger__WEBPACK_IMPORTED_MODULE_1__.createNamespaceLogger)('database');\n// Use env var or fallback to local MongoDB\nconst MONGODB_URI = process.env.MONGODB_URI || 'mongodb://localhost:27017/civix_fInal_production';\n// Track connection status\nlet isConnected = false;\nlet connectionAttempts = 0;\nconst MAX_RECONNECT_ATTEMPTS = 5;\n// Debug: Show env and URI (sanitized)\nconsole.debug(`[DB] NODE_ENV: ${\"development\"}`);\nconsole.debug(`[DB] Raw MONGODB_URI: ${MONGODB_URI}`);\ntry {\n    const sanitizedUri = MONGODB_URI.replace(/(mongodb\\+srv:\\/\\/[^:]+:)([^@]+)(@.+)/, '$1*****$3');\n    dbLogger.info(`Using MongoDB URI: ${sanitizedUri}`);\n    console.debug(`[DB] Using MongoDB URI (sanitized): ${sanitizedUri}`);\n} catch (error) {\n    dbLogger.warn('Could not sanitize MongoDB URI for logging');\n    console.warn('[DB] Could not sanitize MongoDB URI for logging');\n}\nconst isServer = \"undefined\" === 'undefined';\nconsole.debug(`[DB] isServer: ${isServer}`);\nconst cached = isServer && global.mongoose ? global.mongoose : {\n    conn: null,\n    promise: null\n};\nif (isServer && !global.mongoose) {\n    global.mongoose = cached;\n    console.debug('[DB] Initialized global.mongoose cache');\n}\n// Setup listeners for connection events\nfunction setupMongooseListeners() {\n    mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on('connected', ()=>{\n        isConnected = true;\n        connectionAttempts = 0;\n        dbLogger.info('MongoDB connected successfully');\n        console.log('‚úÖ MongoDB connected successfully');\n        console.log(`[DB] Database: ${(mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).db?.databaseName || 'unknown'}`);\n        console.log(`[DB] Host: ${(mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).host}`);\n        console.log(`[DB] Port: ${(mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).port}`);\n    });\n    mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on('error', (error)=>{\n        isConnected = false;\n        dbLogger.error('MongoDB connection error', {\n            error: error.message\n        });\n        console.error('‚ùå MongoDB connection error:', error.message);\n    });\n    mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on('disconnected', ()=>{\n        isConnected = false;\n        dbLogger.warn('MongoDB disconnected');\n        console.warn('‚ö†Ô∏è MongoDB disconnected');\n    });\n    mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on('reconnected', ()=>{\n        isConnected = true;\n        dbLogger.info('MongoDB reconnected');\n        console.log('üîÑ MongoDB reconnected');\n    });\n    mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on('close', ()=>{\n        isConnected = false;\n        dbLogger.info('MongoDB connection closed');\n        console.log('üîí MongoDB connection closed');\n    });\n}\nsetupMongooseListeners();\n// ---\n// The one function you must always await before any DB op!\nasync function connectDB() {\n    if (!isServer) {\n        console.error('[DB] Attempted to connect to DB on client side');\n        throw new Error('Database connection is only available on the server side');\n    }\n    if (cached.conn && isConnected) {\n        dbLogger.debug('Using existing database connection');\n        console.debug('[DB] Using existing database connection');\n        return cached.conn;\n    }\n    if (cached.promise) {\n        console.debug('[DB] Awaiting existing connection promise');\n        try {\n            cached.conn = await cached.promise;\n            return cached.conn;\n        } catch (error) {\n            cached.promise = null;\n            console.error('[DB] Error while awaiting connection promise:', error);\n            throw error;\n        }\n    }\n    // Connection options\n    const opts = {\n        bufferCommands: false,\n        maxPoolSize: 10,\n        serverSelectionTimeoutMS: 10000,\n        socketTimeoutMS: 45000,\n        connectTimeoutMS: 10000,\n        retryWrites: true,\n        retryReads: true\n    };\n    dbLogger.info('Connecting to MongoDB...');\n    console.log('[DB] MongoDB connection attempt - check if MongoDB is running locally');\n    console.debug(`[DB] Connection options: ${JSON.stringify(opts)}`);\n    const mongoUri = MONGODB_URI;\n    console.debug(`[DB] Connecting with URI: ${mongoUri.replace(/(mongodb\\+srv:\\/\\/[^:]+:)([^@]+)(@.+)/, '$1*****$3')}`);\n    cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(mongoUri, opts).then((mongooseInstance)=>{\n        dbLogger.info('Successfully connected to MongoDB');\n        console.log('‚úÖ MongoDB connected successfully');\n        console.log(`[DB] Database: ${mongooseInstance.connection.db?.databaseName || 'unknown'}`);\n        console.log(`[DB] Host: ${mongooseInstance.connection.host}`);\n        console.log(`[DB] Port: ${mongooseInstance.connection.port}`);\n        return mongooseInstance;\n    }).catch((error)=>{\n        connectionAttempts++;\n        console.error(`‚ùå MongoDB connection error (attempt ${connectionAttempts}/${MAX_RECONNECT_ATTEMPTS}):`, error.message);\n        dbLogger.error('MongoDB connection error', {\n            error: error.message,\n            attempt: connectionAttempts,\n            maxAttempts: MAX_RECONNECT_ATTEMPTS,\n            stack:  true ? error.stack : 0\n        });\n        cached.promise = null;\n        // Helpful error hints\n        if (error.message.includes('ECONNREFUSED')) {\n            console.error('üí° MongoDB is not running. Please start MongoDB:');\n            console.error('   ‚Ä¢ Windows: Start MongoDB service or run mongod');\n            console.error('   ‚Ä¢ macOS: brew services start mongodb-community');\n            console.error('   ‚Ä¢ Linux: sudo systemctl start mongod');\n        } else if (error.message.includes('ENOTFOUND')) {\n            console.error('üí° Cannot resolve MongoDB host. Check your MONGODB_URI');\n        } else if (error.message.includes('Authentication failed')) {\n            console.error('üí° Authentication failed. Check your MongoDB credentials');\n        }\n        throw error;\n    });\n    try {\n        cached.conn = await cached.promise;\n        console.debug('[DB] Database connection established and cached');\n        return cached.conn;\n    } catch (error) {\n        cached.promise = null;\n        console.error('[DB] Error while awaiting connection promise:', error);\n        throw error;\n    }\n}\n// ---\n// Utility: Get connection status (for debugging/monitoring)\nfunction getConnectionStatus() {\n    return {\n        isConnected,\n        connectionAttempts,\n        databaseName: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).db?.databaseName,\n        host: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).host,\n        port: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).port,\n        readyState: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).readyState\n    };\n}\n// Utility: Disconnect (for tests/dev)\nasync function disconnectDB() {\n    if (isConnected) {\n        await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.close();\n        cached.conn = null;\n        cached.promise = null;\n        isConnected = false;\n        console.log('üîí MongoDB connection closed');\n    }\n}\n// ---\n// Always: await connectDB() before any DB operation in your API/server code!\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectDB);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUEsTUFBTTtBQUNOLDREQUE0RDtBQUNyRCxTQUFTc0M7SUFDZCxPQUFPO1FBQ0w5QztRQUNBQztRQUNBbUIsY0FBYzFCLDREQUFtQixDQUFDeUIsRUFBRSxFQUFFQztRQUN0Q0MsTUFBTTNCLDREQUFtQixDQUFDMkIsSUFBSTtRQUM5QkMsTUFBTTVCLDREQUFtQixDQUFDNEIsSUFBSTtRQUM5QnlCLFlBQVlyRCw0REFBbUIsQ0FBQ3FELFVBQVU7SUFDNUM7QUFDRjtBQUVBLHNDQUFzQztBQUMvQixlQUFlQztJQUNwQixJQUFJaEQsYUFBYTtRQUNmLE1BQU1OLDBEQUFtQixDQUFDdUQsS0FBSztRQUMvQnRDLE9BQU9FLElBQUksR0FBRztRQUNkRixPQUFPRyxPQUFPLEdBQUc7UUFDakJkLGNBQWM7UUFDZEcsUUFBUWUsR0FBRyxDQUFDO0lBQ2Q7QUFDRjtBQUVBLE1BQU07QUFDTiw2RUFBNkU7QUFDN0UsaUVBQWVNLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWNib29rL0Rlc2t0b3AvcGVyc29uYWwtd29ya3NwYWNlL2Npdml4L2xpYi9kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHsgY3JlYXRlTmFtZXNwYWNlTG9nZ2VyIH0gZnJvbSAnLi9sb2dnZXInO1xuXG4vLyAtLS1cbi8vIENJVklYIEFHRU5UIE1PREU6IEJ1bGxldHByb29mIE1vbmdvREIgQ29ubmVjdGlvbiBmb3IgTmV4dC5qc1xuLy8gMS4gQWx3YXlzIGF3YWl0IGNvbm5lY3REQigpIGluIGV2ZXJ5IEFQSS9zZXJ2ZXIgZnVuY3Rpb24gYmVmb3JlIERCIG9wcyFcbi8vIDIuIFdyaXRlL3NlZWQgZGF0YSB0byBtYWtlIERCIGFwcGVhciBpbiBDb21wYXNzLlxuLy8gMy4gLmVudi5sb2NhbDogTU9OR09EQl9VUkk9bW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9jaXZpeF9mSW5hbF9wcm9kdWN0aW9uXG4vLyA0LiBBZGQgbG9ncyBiZWZvcmUvYWZ0ZXIgREIgb3BzIGZvciB2aXNpYmlsaXR5LlxuLy8gLS0tXG5cbmNvbnN0IGRiTG9nZ2VyID0gY3JlYXRlTmFtZXNwYWNlTG9nZ2VyKCdkYXRhYmFzZScpO1xuXG4vLyBVc2UgZW52IHZhciBvciBmYWxsYmFjayB0byBsb2NhbCBNb25nb0RCXG5jb25zdCBNT05HT0RCX1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8ICdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L2Npdml4X2ZJbmFsX3Byb2R1Y3Rpb24nO1xuXG4vLyBUcmFjayBjb25uZWN0aW9uIHN0YXR1c1xubGV0IGlzQ29ubmVjdGVkID0gZmFsc2U7XG5sZXQgY29ubmVjdGlvbkF0dGVtcHRzID0gMDtcbmNvbnN0IE1BWF9SRUNPTk5FQ1RfQVRURU1QVFMgPSA1O1xuXG4vLyBEZWJ1ZzogU2hvdyBlbnYgYW5kIFVSSSAoc2FuaXRpemVkKVxuY29uc29sZS5kZWJ1ZyhgW0RCXSBOT0RFX0VOVjogJHtwcm9jZXNzLmVudi5OT0RFX0VOVn1gKTtcbmNvbnNvbGUuZGVidWcoYFtEQl0gUmF3IE1PTkdPREJfVVJJOiAke01PTkdPREJfVVJJfWApO1xudHJ5IHtcbiAgY29uc3Qgc2FuaXRpemVkVXJpID0gTU9OR09EQl9VUkkucmVwbGFjZShcbiAgICAvKG1vbmdvZGJcXCtzcnY6XFwvXFwvW146XSs6KShbXkBdKykoQC4rKS8sXG4gICAgJyQxKioqKiokMydcbiAgKTtcbiAgZGJMb2dnZXIuaW5mbyhgVXNpbmcgTW9uZ29EQiBVUkk6ICR7c2FuaXRpemVkVXJpfWApO1xuICBjb25zb2xlLmRlYnVnKGBbREJdIFVzaW5nIE1vbmdvREIgVVJJIChzYW5pdGl6ZWQpOiAke3Nhbml0aXplZFVyaX1gKTtcbn0gY2F0Y2ggKGVycm9yKSB7XG4gIGRiTG9nZ2VyLndhcm4oJ0NvdWxkIG5vdCBzYW5pdGl6ZSBNb25nb0RCIFVSSSBmb3IgbG9nZ2luZycpO1xuICBjb25zb2xlLndhcm4oJ1tEQl0gQ291bGQgbm90IHNhbml0aXplIE1vbmdvREIgVVJJIGZvciBsb2dnaW5nJyk7XG59XG5cbi8vIENhY2hlIGNvbm5lY3Rpb24gaW4gZ2xvYmFsIChzZXJ2ZXIgb25seSlcbmludGVyZmFjZSBDYWNoZWRDb25uZWN0aW9uIHtcbiAgY29ubjogdHlwZW9mIG1vbmdvb3NlIHwgbnVsbDtcbiAgcHJvbWlzZTogUHJvbWlzZTx0eXBlb2YgbW9uZ29vc2U+IHwgbnVsbDtcbn1cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZhclxuICB2YXIgbW9uZ29vc2U6IENhY2hlZENvbm5lY3Rpb24gfCB1bmRlZmluZWQ7XG59XG5jb25zdCBpc1NlcnZlciA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnO1xuY29uc29sZS5kZWJ1ZyhgW0RCXSBpc1NlcnZlcjogJHtpc1NlcnZlcn1gKTtcbmNvbnN0IGNhY2hlZDogQ2FjaGVkQ29ubmVjdGlvbiA9IGlzU2VydmVyICYmIGdsb2JhbC5tb25nb29zZSA/IGdsb2JhbC5tb25nb29zZSA6IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xuaWYgKGlzU2VydmVyICYmICFnbG9iYWwubW9uZ29vc2UpIHtcbiAgZ2xvYmFsLm1vbmdvb3NlID0gY2FjaGVkO1xuICBjb25zb2xlLmRlYnVnKCdbREJdIEluaXRpYWxpemVkIGdsb2JhbC5tb25nb29zZSBjYWNoZScpO1xufVxuXG4vLyBTZXR1cCBsaXN0ZW5lcnMgZm9yIGNvbm5lY3Rpb24gZXZlbnRzXG5mdW5jdGlvbiBzZXR1cE1vbmdvb3NlTGlzdGVuZXJzKCkge1xuICBtb25nb29zZS5jb25uZWN0aW9uLm9uKCdjb25uZWN0ZWQnLCAoKSA9PiB7XG4gICAgaXNDb25uZWN0ZWQgPSB0cnVlO1xuICAgIGNvbm5lY3Rpb25BdHRlbXB0cyA9IDA7XG4gICAgZGJMb2dnZXIuaW5mbygnTW9uZ29EQiBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgY29uc29sZS5sb2coJ+KchSBNb25nb0RCIGNvbm5lY3RlZCBzdWNjZXNzZnVsbHknKTtcbiAgICBjb25zb2xlLmxvZyhgW0RCXSBEYXRhYmFzZTogJHttb25nb29zZS5jb25uZWN0aW9uLmRiPy5kYXRhYmFzZU5hbWUgfHwgJ3Vua25vd24nfWApO1xuICAgIGNvbnNvbGUubG9nKGBbREJdIEhvc3Q6ICR7bW9uZ29vc2UuY29ubmVjdGlvbi5ob3N0fWApO1xuICAgIGNvbnNvbGUubG9nKGBbREJdIFBvcnQ6ICR7bW9uZ29vc2UuY29ubmVjdGlvbi5wb3J0fWApO1xuICB9KTtcbiAgbW9uZ29vc2UuY29ubmVjdGlvbi5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICBpc0Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgIGRiTG9nZ2VyLmVycm9yKCdNb25nb0RCIGNvbm5lY3Rpb24gZXJyb3InLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBNb25nb0RCIGNvbm5lY3Rpb24gZXJyb3I6JywgZXJyb3IubWVzc2FnZSk7XG4gIH0pO1xuICBtb25nb29zZS5jb25uZWN0aW9uLm9uKCdkaXNjb25uZWN0ZWQnLCAoKSA9PiB7XG4gICAgaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICBkYkxvZ2dlci53YXJuKCdNb25nb0RCIGRpc2Nvbm5lY3RlZCcpO1xuICAgIGNvbnNvbGUud2Fybign4pqg77iPIE1vbmdvREIgZGlzY29ubmVjdGVkJyk7XG4gIH0pO1xuICBtb25nb29zZS5jb25uZWN0aW9uLm9uKCdyZWNvbm5lY3RlZCcsICgpID0+IHtcbiAgICBpc0Nvbm5lY3RlZCA9IHRydWU7XG4gICAgZGJMb2dnZXIuaW5mbygnTW9uZ29EQiByZWNvbm5lY3RlZCcpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIE1vbmdvREIgcmVjb25uZWN0ZWQnKTtcbiAgfSk7XG4gIG1vbmdvb3NlLmNvbm5lY3Rpb24ub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgIGlzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgZGJMb2dnZXIuaW5mbygnTW9uZ29EQiBjb25uZWN0aW9uIGNsb3NlZCcpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SSIE1vbmdvREIgY29ubmVjdGlvbiBjbG9zZWQnKTtcbiAgfSk7XG59XG5zZXR1cE1vbmdvb3NlTGlzdGVuZXJzKCk7XG5cbi8vIC0tLVxuLy8gVGhlIG9uZSBmdW5jdGlvbiB5b3UgbXVzdCBhbHdheXMgYXdhaXQgYmVmb3JlIGFueSBEQiBvcCFcbmFzeW5jIGZ1bmN0aW9uIGNvbm5lY3REQigpIHtcbiAgaWYgKCFpc1NlcnZlcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gQXR0ZW1wdGVkIHRvIGNvbm5lY3QgdG8gREIgb24gY2xpZW50IHNpZGUnKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gaXMgb25seSBhdmFpbGFibGUgb24gdGhlIHNlcnZlciBzaWRlJyk7XG4gIH1cbiAgaWYgKGNhY2hlZC5jb25uICYmIGlzQ29ubmVjdGVkKSB7XG4gICAgZGJMb2dnZXIuZGVidWcoJ1VzaW5nIGV4aXN0aW5nIGRhdGFiYXNlIGNvbm5lY3Rpb24nKTtcbiAgICBjb25zb2xlLmRlYnVnKCdbREJdIFVzaW5nIGV4aXN0aW5nIGRhdGFiYXNlIGNvbm5lY3Rpb24nKTtcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XG4gIH1cbiAgaWYgKGNhY2hlZC5wcm9taXNlKSB7XG4gICAgY29uc29sZS5kZWJ1ZygnW0RCXSBBd2FpdGluZyBleGlzdGluZyBjb25uZWN0aW9uIHByb21pc2UnKTtcbiAgICB0cnkge1xuICAgICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcbiAgICAgIHJldHVybiBjYWNoZWQuY29ubjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xuICAgICAgY29uc29sZS5lcnJvcignW0RCXSBFcnJvciB3aGlsZSBhd2FpdGluZyBjb25uZWN0aW9uIHByb21pc2U6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gQ29ubmVjdGlvbiBvcHRpb25zXG4gIGNvbnN0IG9wdHMgPSB7XG4gICAgYnVmZmVyQ29tbWFuZHM6IGZhbHNlLFxuICAgIG1heFBvb2xTaXplOiAxMCxcbiAgICBzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVM6IDEwMDAwLFxuICAgIHNvY2tldFRpbWVvdXRNUzogNDUwMDAsXG4gICAgY29ubmVjdFRpbWVvdXRNUzogMTAwMDAsXG4gICAgcmV0cnlXcml0ZXM6IHRydWUsXG4gICAgcmV0cnlSZWFkczogdHJ1ZSxcbiAgfTtcblxuICBkYkxvZ2dlci5pbmZvKCdDb25uZWN0aW5nIHRvIE1vbmdvREIuLi4nKTtcbiAgY29uc29sZS5sb2coJ1tEQl0gTW9uZ29EQiBjb25uZWN0aW9uIGF0dGVtcHQgLSBjaGVjayBpZiBNb25nb0RCIGlzIHJ1bm5pbmcgbG9jYWxseScpO1xuICBjb25zb2xlLmRlYnVnKGBbREJdIENvbm5lY3Rpb24gb3B0aW9uczogJHtKU09OLnN0cmluZ2lmeShvcHRzKX1gKTtcbiAgY29uc3QgbW9uZ29VcmkgPSBNT05HT0RCX1VSSSBhcyBzdHJpbmc7XG4gIGNvbnNvbGUuZGVidWcoYFtEQl0gQ29ubmVjdGluZyB3aXRoIFVSSTogJHttb25nb1VyaS5yZXBsYWNlKC8obW9uZ29kYlxcK3NydjpcXC9cXC9bXjpdKzopKFteQF0rKShALispLywgJyQxKioqKiokMycpfWApO1xuXG4gIGNhY2hlZC5wcm9taXNlID0gbW9uZ29vc2UuY29ubmVjdChtb25nb1VyaSwgb3B0cykudGhlbigobW9uZ29vc2VJbnN0YW5jZTogdHlwZW9mIG1vbmdvb3NlKSA9PiB7XG4gICAgZGJMb2dnZXIuaW5mbygnU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byBNb25nb0RCJyk7XG4gICAgY29uc29sZS5sb2coJ+KchSBNb25nb0RCIGNvbm5lY3RlZCBzdWNjZXNzZnVsbHknKTtcbiAgICBjb25zb2xlLmxvZyhgW0RCXSBEYXRhYmFzZTogJHttb25nb29zZUluc3RhbmNlLmNvbm5lY3Rpb24uZGI/LmRhdGFiYXNlTmFtZSB8fCAndW5rbm93bid9YCk7XG4gICAgY29uc29sZS5sb2coYFtEQl0gSG9zdDogJHttb25nb29zZUluc3RhbmNlLmNvbm5lY3Rpb24uaG9zdH1gKTtcbiAgICBjb25zb2xlLmxvZyhgW0RCXSBQb3J0OiAke21vbmdvb3NlSW5zdGFuY2UuY29ubmVjdGlvbi5wb3J0fWApO1xuICAgIHJldHVybiBtb25nb29zZUluc3RhbmNlO1xuICB9KS5jYXRjaCgoZXJyb3I6IEVycm9yKSA9PiB7XG4gICAgY29ubmVjdGlvbkF0dGVtcHRzKys7XG4gICAgY29uc29sZS5lcnJvcihg4p2MIE1vbmdvREIgY29ubmVjdGlvbiBlcnJvciAoYXR0ZW1wdCAke2Nvbm5lY3Rpb25BdHRlbXB0c30vJHtNQVhfUkVDT05ORUNUX0FUVEVNUFRTfSk6YCwgZXJyb3IubWVzc2FnZSk7XG4gICAgZGJMb2dnZXIuZXJyb3IoJ01vbmdvREIgY29ubmVjdGlvbiBlcnJvcicsIHtcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgYXR0ZW1wdDogY29ubmVjdGlvbkF0dGVtcHRzLFxuICAgICAgbWF4QXR0ZW1wdHM6IE1BWF9SRUNPTk5FQ1RfQVRURU1QVFMsXG4gICAgICBzdGFjazogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgIH0pO1xuICAgIGNhY2hlZC5wcm9taXNlID0gbnVsbDtcbiAgICAvLyBIZWxwZnVsIGVycm9yIGhpbnRzXG4gICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0VDT05OUkVGVVNFRCcpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfwn5KhIE1vbmdvREIgaXMgbm90IHJ1bm5pbmcuIFBsZWFzZSBzdGFydCBNb25nb0RCOicpO1xuICAgICAgY29uc29sZS5lcnJvcignICAg4oCiIFdpbmRvd3M6IFN0YXJ0IE1vbmdvREIgc2VydmljZSBvciBydW4gbW9uZ29kJyk7XG4gICAgICBjb25zb2xlLmVycm9yKCcgICDigKIgbWFjT1M6IGJyZXcgc2VydmljZXMgc3RhcnQgbW9uZ29kYi1jb21tdW5pdHknKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJyAgIOKAoiBMaW51eDogc3VkbyBzeXN0ZW1jdGwgc3RhcnQgbW9uZ29kJyk7XG4gICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdFTk9URk9VTkQnKSkge1xuICAgICAgY29uc29sZS5lcnJvcign8J+SoSBDYW5ub3QgcmVzb2x2ZSBNb25nb0RCIGhvc3QuIENoZWNrIHlvdXIgTU9OR09EQl9VUkknKTtcbiAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZCcpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfwn5KhIEF1dGhlbnRpY2F0aW9uIGZhaWxlZC4gQ2hlY2sgeW91ciBNb25nb0RCIGNyZWRlbnRpYWxzJyk7XG4gICAgfVxuICAgIHRocm93IGVycm9yO1xuICB9KTtcblxuICB0cnkge1xuICAgIGNhY2hlZC5jb25uID0gYXdhaXQgY2FjaGVkLnByb21pc2U7XG4gICAgY29uc29sZS5kZWJ1ZygnW0RCXSBEYXRhYmFzZSBjb25uZWN0aW9uIGVzdGFibGlzaGVkIGFuZCBjYWNoZWQnKTtcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gRXJyb3Igd2hpbGUgYXdhaXRpbmcgY29ubmVjdGlvbiBwcm9taXNlOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyAtLS1cbi8vIFV0aWxpdHk6IEdldCBjb25uZWN0aW9uIHN0YXR1cyAoZm9yIGRlYnVnZ2luZy9tb25pdG9yaW5nKVxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbm5lY3Rpb25TdGF0dXMoKSB7XG4gIHJldHVybiB7XG4gICAgaXNDb25uZWN0ZWQsXG4gICAgY29ubmVjdGlvbkF0dGVtcHRzLFxuICAgIGRhdGFiYXNlTmFtZTogbW9uZ29vc2UuY29ubmVjdGlvbi5kYj8uZGF0YWJhc2VOYW1lLFxuICAgIGhvc3Q6IG1vbmdvb3NlLmNvbm5lY3Rpb24uaG9zdCxcbiAgICBwb3J0OiBtb25nb29zZS5jb25uZWN0aW9uLnBvcnQsXG4gICAgcmVhZHlTdGF0ZTogbW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlXG4gIH07XG59XG5cbi8vIFV0aWxpdHk6IERpc2Nvbm5lY3QgKGZvciB0ZXN0cy9kZXYpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGlzY29ubmVjdERCKCkge1xuICBpZiAoaXNDb25uZWN0ZWQpIHtcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgY2FjaGVkLmNvbm4gPSBudWxsO1xuICAgIGNhY2hlZC5wcm9taXNlID0gbnVsbDtcbiAgICBpc0Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgIGNvbnNvbGUubG9nKCfwn5SSIE1vbmdvREIgY29ubmVjdGlvbiBjbG9zZWQnKTtcbiAgfVxufVxuXG4vLyAtLS1cbi8vIEFsd2F5czogYXdhaXQgY29ubmVjdERCKCkgYmVmb3JlIGFueSBEQiBvcGVyYXRpb24gaW4geW91ciBBUEkvc2VydmVyIGNvZGUhXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0REI7XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJjcmVhdGVOYW1lc3BhY2VMb2dnZXIiLCJkYkxvZ2dlciIsIk1PTkdPREJfVVJJIiwicHJvY2VzcyIsImVudiIsImlzQ29ubmVjdGVkIiwiY29ubmVjdGlvbkF0dGVtcHRzIiwiTUFYX1JFQ09OTkVDVF9BVFRFTVBUUyIsImNvbnNvbGUiLCJkZWJ1ZyIsInNhbml0aXplZFVyaSIsInJlcGxhY2UiLCJpbmZvIiwiZXJyb3IiLCJ3YXJuIiwiaXNTZXJ2ZXIiLCJjYWNoZWQiLCJnbG9iYWwiLCJjb25uIiwicHJvbWlzZSIsInNldHVwTW9uZ29vc2VMaXN0ZW5lcnMiLCJjb25uZWN0aW9uIiwib24iLCJsb2ciLCJkYiIsImRhdGFiYXNlTmFtZSIsImhvc3QiLCJwb3J0IiwibWVzc2FnZSIsImNvbm5lY3REQiIsIkVycm9yIiwib3B0cyIsImJ1ZmZlckNvbW1hbmRzIiwibWF4UG9vbFNpemUiLCJzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMiLCJzb2NrZXRUaW1lb3V0TVMiLCJjb25uZWN0VGltZW91dE1TIiwicmV0cnlXcml0ZXMiLCJyZXRyeVJlYWRzIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1vbmdvVXJpIiwiY29ubmVjdCIsInRoZW4iLCJtb25nb29zZUluc3RhbmNlIiwiY2F0Y2giLCJhdHRlbXB0IiwibWF4QXR0ZW1wdHMiLCJzdGFjayIsInVuZGVmaW5lZCIsImluY2x1ZGVzIiwiZ2V0Q29ubmVjdGlvblN0YXR1cyIsInJlYWR5U3RhdGUiLCJkaXNjb25uZWN0REIiLCJjbG9zZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/logger.ts":
/*!***********************!*\
  !*** ./lib/logger.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createNamespaceLogger: () => (/* binding */ createNamespaceLogger),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n/**\n * Logger utility for the application\n */ /**\n * Simple logger for the application\n * In a production environment, this would be replaced with a more robust solution\n * like winston, pino, or other logging libraries\n */ class Logger {\n    /**\n   * Log a debug message\n   * @param message - The message to log\n   * @param payload - Optional additional data to log\n   */ debug(message, payload) {\n        this.log('debug', {\n            message,\n            ...payload\n        });\n    }\n    /**\n   * Log an informational message\n   * @param message - The message to log\n   * @param payload - Optional additional data to log\n   */ info(message, payload) {\n        this.log('info', {\n            message,\n            ...payload\n        });\n    }\n    /**\n   * Log a warning message\n   * @param message - The message to log\n   * @param payload - Optional additional data to log\n   */ warn(message, payload) {\n        this.log('warn', {\n            message,\n            ...payload\n        });\n    }\n    /**\n   * Log an error message\n   * @param message - The message to log\n   * @param payload - Optional additional data to log\n   */ error(message, payload) {\n        this.log('error', {\n            message,\n            ...payload\n        });\n    }\n    /**\n   * Log a message with a specific log level\n   * @param level - The log level\n   * @param payload - The data to log\n   */ log(level, payload) {\n        // Skip logging in test environment\n        if (this.isTest) {\n            return;\n        }\n        // In development, pretty print the log\n        if (this.isDevelopment) {\n            const timestamp = new Date().toISOString();\n            const { message, ...data } = payload;\n            switch(level){\n                case 'debug':\n                    // eslint-disable-next-line no-console\n                    console.debug(`[${timestamp}] üêõ DEBUG: ${message}`, Object.keys(data).length ? data : '');\n                    break;\n                case 'info':\n                    // eslint-disable-next-line no-console\n                    console.info(`[${timestamp}] ‚ÑπÔ∏è INFO: ${message}`, Object.keys(data).length ? data : '');\n                    break;\n                case 'warn':\n                    // eslint-disable-next-line no-console\n                    console.warn(`[${timestamp}] ‚ö†Ô∏è WARN: ${message}`, Object.keys(data).length ? data : '');\n                    break;\n                case 'error':\n                    // eslint-disable-next-line no-console\n                    console.error(`[${timestamp}] üî¥ ERROR: ${message}`, Object.keys(data).length ? data : '');\n                    break;\n            }\n            return;\n        }\n        // In production, use structured logging (JSON format)\n        const logData = {\n            timestamp: new Date().toISOString(),\n            level,\n            ...payload\n        };\n        // In production we would typically use a more robust logging solution\n        // This is a simple fallback\n        switch(level){\n            case 'debug':\n                // eslint-disable-next-line no-console\n                console.debug(JSON.stringify(logData));\n                break;\n            case 'info':\n                // eslint-disable-next-line no-console\n                console.info(JSON.stringify(logData));\n                break;\n            case 'warn':\n                // eslint-disable-next-line no-console\n                console.warn(JSON.stringify(logData));\n                break;\n            case 'error':\n                // eslint-disable-next-line no-console\n                console.error(JSON.stringify(logData));\n                break;\n        }\n    }\n    constructor(){\n        this.isDevelopment = \"development\" === 'development';\n        this.isTest = \"development\" === 'test';\n    }\n}\n// Create a singleton logger instance\nconst logger = new Logger();\n/**\n * Create a namespace logger that includes a namespace in all logs\n * @param namespace - The namespace to include in logs\n */ const createNamespaceLogger = (namespace)=>{\n    return {\n        debug: (message, payload)=>logger.debug(message, {\n                namespace,\n                ...payload\n            }),\n        info: (message, payload)=>logger.info(message, {\n                namespace,\n                ...payload\n            }),\n        warn: (message, payload)=>logger.warn(message, {\n                namespace,\n                ...payload\n            }),\n        error: (message, payload)=>logger.error(message, {\n                namespace,\n                ...payload\n            })\n    };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0JBQXlCOztBQXVHNUM7QUFFQSxxQ0FBcUM7QUFDOUIsTUFBTUMsU0FBUyxJQUFJdkIsU0FBUztBQUVuQzs7O0NBR0MsR0FDTSxNQUFNd0Isd0JBQXdCLENBQUNDO0lBQ3BDLE9BQU87UUFDTHhCLE9BQU8sQ0FBQ0MsU0FBaUJDLFVBQXNDb0IsT0FBT3RCLEtBQUssQ0FBQ0MsU0FBUztnQkFBRXVCO2dCQUFXLEdBQUd0QixPQUFPO1lBQUM7UUFDN0dFLE1BQU0sQ0FBQ0gsU0FBaUJDLFVBQXNDb0IsT0FBT2xCLElBQUksQ0FBQ0gsU0FBUztnQkFBRXVCO2dCQUFXLEdBQUd0QixPQUFPO1lBQUM7UUFDM0dHLE1BQU0sQ0FBQ0osU0FBaUJDLFVBQXNDb0IsT0FBT2pCLElBQUksQ0FBQ0osU0FBUztnQkFBRXVCO2dCQUFXLEdBQUd0QixPQUFPO1lBQUM7UUFDM0dJLE9BQU8sQ0FBQ0wsU0FBaUJDLFVBQXNDb0IsT0FBT2hCLEtBQUssQ0FBQ0wsU0FBUztnQkFBRXVCO2dCQUFXLEdBQUd0QixPQUFPO1lBQUM7SUFDL0c7QUFDRixFQUFFO0FBRUYsaUVBQWVvQixNQUFNQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvbWFjYm9vay9EZXNrdG9wL3BlcnNvbmFsLXdvcmtzcGFjZS9jaXZpeC9saWIvbG9nZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTG9nZ2VyIHV0aWxpdHkgZm9yIHRoZSBhcHBsaWNhdGlvblxuICovXG5cbnR5cGUgTG9nTGV2ZWwgPSAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJztcblxuaW50ZXJmYWNlIExvZ1BheWxvYWQge1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIFtrZXk6IHN0cmluZ106IHVua25vd247XG59XG5cbi8qKlxuICogU2ltcGxlIGxvZ2dlciBmb3IgdGhlIGFwcGxpY2F0aW9uXG4gKiBJbiBhIHByb2R1Y3Rpb24gZW52aXJvbm1lbnQsIHRoaXMgd291bGQgYmUgcmVwbGFjZWQgd2l0aCBhIG1vcmUgcm9idXN0IHNvbHV0aW9uXG4gKiBsaWtlIHdpbnN0b24sIHBpbm8sIG9yIG90aGVyIGxvZ2dpbmcgbGlicmFyaWVzXG4gKi9cbmNsYXNzIExvZ2dlciB7XG4gIHByaXZhdGUgaXNEZXZlbG9wbWVudCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnO1xuICBwcml2YXRlIGlzVGVzdCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCc7XG5cbiAgLyoqXG4gICAqIExvZyBhIGRlYnVnIG1lc3NhZ2VcbiAgICogQHBhcmFtIG1lc3NhZ2UgLSBUaGUgbWVzc2FnZSB0byBsb2dcbiAgICogQHBhcmFtIHBheWxvYWQgLSBPcHRpb25hbCBhZGRpdGlvbmFsIGRhdGEgdG8gbG9nXG4gICAqL1xuICBkZWJ1ZyhtZXNzYWdlOiBzdHJpbmcsIHBheWxvYWQ/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHZvaWQge1xuICAgIHRoaXMubG9nKCdkZWJ1ZycsIHsgbWVzc2FnZSwgLi4ucGF5bG9hZCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgYW4gaW5mb3JtYXRpb25hbCBtZXNzYWdlXG4gICAqIEBwYXJhbSBtZXNzYWdlIC0gVGhlIG1lc3NhZ2UgdG8gbG9nXG4gICAqIEBwYXJhbSBwYXlsb2FkIC0gT3B0aW9uYWwgYWRkaXRpb25hbCBkYXRhIHRvIGxvZ1xuICAgKi9cbiAgaW5mbyhtZXNzYWdlOiBzdHJpbmcsIHBheWxvYWQ/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHZvaWQge1xuICAgIHRoaXMubG9nKCdpbmZvJywgeyBtZXNzYWdlLCAuLi5wYXlsb2FkIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIExvZyBhIHdhcm5pbmcgbWVzc2FnZVxuICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIGxvZ1xuICAgKiBAcGFyYW0gcGF5bG9hZCAtIE9wdGlvbmFsIGFkZGl0aW9uYWwgZGF0YSB0byBsb2dcbiAgICovXG4gIHdhcm4obWVzc2FnZTogc3RyaW5nLCBwYXlsb2FkPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiB2b2lkIHtcbiAgICB0aGlzLmxvZygnd2FybicsIHsgbWVzc2FnZSwgLi4ucGF5bG9hZCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgYW4gZXJyb3IgbWVzc2FnZVxuICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIGxvZ1xuICAgKiBAcGFyYW0gcGF5bG9hZCAtIE9wdGlvbmFsIGFkZGl0aW9uYWwgZGF0YSB0byBsb2dcbiAgICovXG4gIGVycm9yKG1lc3NhZ2U6IHN0cmluZywgcGF5bG9hZD86IFJlY29yZDxzdHJpbmcsIHVua25vd24+KTogdm9pZCB7XG4gICAgdGhpcy5sb2coJ2Vycm9yJywgeyBtZXNzYWdlLCAuLi5wYXlsb2FkIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIExvZyBhIG1lc3NhZ2Ugd2l0aCBhIHNwZWNpZmljIGxvZyBsZXZlbFxuICAgKiBAcGFyYW0gbGV2ZWwgLSBUaGUgbG9nIGxldmVsXG4gICAqIEBwYXJhbSBwYXlsb2FkIC0gVGhlIGRhdGEgdG8gbG9nXG4gICAqL1xuICBwcml2YXRlIGxvZyhsZXZlbDogTG9nTGV2ZWwsIHBheWxvYWQ6IExvZ1BheWxvYWQpOiB2b2lkIHtcbiAgICAvLyBTa2lwIGxvZ2dpbmcgaW4gdGVzdCBlbnZpcm9ubWVudFxuICAgIGlmICh0aGlzLmlzVGVzdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEluIGRldmVsb3BtZW50LCBwcmV0dHkgcHJpbnQgdGhlIGxvZ1xuICAgIGlmICh0aGlzLmlzRGV2ZWxvcG1lbnQpIHtcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgIGNvbnN0IHsgbWVzc2FnZSwgLi4uZGF0YSB9ID0gcGF5bG9hZDtcbiAgICAgIFxuICAgICAgc3dpdGNoIChsZXZlbCkge1xuICAgICAgICBjYXNlICdkZWJ1Zyc6XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICBjb25zb2xlLmRlYnVnKGBbJHt0aW1lc3RhbXB9XSDwn5CbIERFQlVHOiAke21lc3NhZ2V9YCwgT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID8gZGF0YSA6ICcnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnaW5mbyc6XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICBjb25zb2xlLmluZm8oYFske3RpbWVzdGFtcH1dIOKEue+4jyBJTkZPOiAke21lc3NhZ2V9YCwgT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID8gZGF0YSA6ICcnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnd2Fybic6XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICBjb25zb2xlLndhcm4oYFske3RpbWVzdGFtcH1dIOKaoO+4jyBXQVJOOiAke21lc3NhZ2V9YCwgT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID8gZGF0YSA6ICcnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgY29uc29sZS5lcnJvcihgWyR7dGltZXN0YW1wfV0g8J+UtCBFUlJPUjogJHttZXNzYWdlfWAsIE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA/IGRhdGEgOiAnJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSW4gcHJvZHVjdGlvbiwgdXNlIHN0cnVjdHVyZWQgbG9nZ2luZyAoSlNPTiBmb3JtYXQpXG4gICAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgbGV2ZWwsXG4gICAgICAuLi5wYXlsb2FkLFxuICAgIH07XG5cbiAgICAvLyBJbiBwcm9kdWN0aW9uIHdlIHdvdWxkIHR5cGljYWxseSB1c2UgYSBtb3JlIHJvYnVzdCBsb2dnaW5nIHNvbHV0aW9uXG4gICAgLy8gVGhpcyBpcyBhIHNpbXBsZSBmYWxsYmFja1xuICAgIHN3aXRjaCAobGV2ZWwpIHtcbiAgICAgIGNhc2UgJ2RlYnVnJzpcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhKU09OLnN0cmluZ2lmeShsb2dEYXRhKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaW5mbyc6XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUuaW5mbyhKU09OLnN0cmluZ2lmeShsb2dEYXRhKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnd2Fybic6XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUud2FybihKU09OLnN0cmluZ2lmeShsb2dEYXRhKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLmVycm9yKEpTT04uc3RyaW5naWZ5KGxvZ0RhdGEpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG5cbi8vIENyZWF0ZSBhIHNpbmdsZXRvbiBsb2dnZXIgaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG5cbi8qKlxuICogQ3JlYXRlIGEgbmFtZXNwYWNlIGxvZ2dlciB0aGF0IGluY2x1ZGVzIGEgbmFtZXNwYWNlIGluIGFsbCBsb2dzXG4gKiBAcGFyYW0gbmFtZXNwYWNlIC0gVGhlIG5hbWVzcGFjZSB0byBpbmNsdWRlIGluIGxvZ3NcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZU5hbWVzcGFjZUxvZ2dlciA9IChuYW1lc3BhY2U6IHN0cmluZykgPT4ge1xuICByZXR1cm4ge1xuICAgIGRlYnVnOiAobWVzc2FnZTogc3RyaW5nLCBwYXlsb2FkPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pID0+IGxvZ2dlci5kZWJ1ZyhtZXNzYWdlLCB7IG5hbWVzcGFjZSwgLi4ucGF5bG9hZCB9KSxcbiAgICBpbmZvOiAobWVzc2FnZTogc3RyaW5nLCBwYXlsb2FkPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pID0+IGxvZ2dlci5pbmZvKG1lc3NhZ2UsIHsgbmFtZXNwYWNlLCAuLi5wYXlsb2FkIH0pLFxuICAgIHdhcm46IChtZXNzYWdlOiBzdHJpbmcsIHBheWxvYWQ/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikgPT4gbG9nZ2VyLndhcm4obWVzc2FnZSwgeyBuYW1lc3BhY2UsIC4uLnBheWxvYWQgfSksXG4gICAgZXJyb3I6IChtZXNzYWdlOiBzdHJpbmcsIHBheWxvYWQ/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikgPT4gbG9nZ2VyLmVycm9yKG1lc3NhZ2UsIHsgbmFtZXNwYWNlLCAuLi5wYXlsb2FkIH0pLFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyOyAiXSwibmFtZXMiOlsiTG9nZ2VyIiwiZGVidWciLCJtZXNzYWdlIiwicGF5bG9hZCIsImxvZyIsImluZm8iLCJ3YXJuIiwiZXJyb3IiLCJsZXZlbCIsImlzVGVzdCIsImlzRGV2ZWxvcG1lbnQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJkYXRhIiwiY29uc29sZSIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJsb2dEYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsInByb2Nlc3MiLCJsb2dnZXIiLCJjcmVhdGVOYW1lc3BhY2VMb2dnZXIiLCJuYW1lc3BhY2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/logger.ts\n");

/***/ }),

/***/ "(rsc)/./models/AuditLog.ts":
/*!****************************!*\
  !*** ./models/AuditLog.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuditActions: () => (/* binding */ AuditActions),\n/* harmony export */   createAuditLog: () => (/* binding */ createAuditLog),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst AuditLogSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    userId: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    action: {\n        type: String,\n        required: true,\n        index: true\n    },\n    entityId: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        index: true\n    },\n    entityType: {\n        type: String,\n        index: true\n    },\n    details: {\n        type: Object\n    },\n    ipAddress: {\n        type: String\n    },\n    userAgent: {\n        type: String\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    }\n}, {\n    timestamps: false\n});\n// Define common audit actions as constants\nconst AuditActions = {\n    // Authentication actions\n    LOGIN: \"LOGIN\",\n    LOGOUT: \"LOGOUT\",\n    LOGIN_FAILED: \"LOGIN_FAILED\",\n    PASSWORD_CHANGED: \"PASSWORD_CHANGED\",\n    PASSWORD_RESET_REQUESTED: \"PASSWORD_RESET_REQUESTED\",\n    PASSWORD_RESET_COMPLETED: \"PASSWORD_RESET_COMPLETED\",\n    // User account actions\n    USER_CREATED: \"USER_CREATED\",\n    USER_UPDATED: \"USER_UPDATED\",\n    USER_DELETED: \"USER_DELETED\",\n    // Booking actions\n    BOOKING_CREATED: \"BOOKING_CREATED\",\n    BOOKING_UPDATED: \"BOOKING_UPDATED\",\n    BOOKING_CANCELLED: \"BOOKING_CANCELLED\",\n    BOOKING_COMPLETED: \"BOOKING_COMPLETED\",\n    // Service actions\n    SERVICE_CREATED: \"SERVICE_CREATED\",\n    SERVICE_UPDATED: \"SERVICE_UPDATED\",\n    SERVICE_DELETED: \"SERVICE_DELETED\",\n    // Admin actions\n    SETTING_CHANGED: \"SETTING_CHANGED\",\n    ROLE_CHANGED: \"ROLE_CHANGED\"\n};\n// Create audit log utility function\nconst createAuditLog = async (userId, action, data)=>{\n    try {\n        // Check if AuditLog model is available\n        if (!AuditLog) {\n            return null;\n        }\n        return await AuditLog.create({\n            userId,\n            action,\n            ...data\n        });\n    } catch (error) {\n        // Non-blocking - we don't want to fail operations if audit logging fails\n        return null;\n    }\n};\n// Safe model creation that works in both Node.js and Edge runtime\nconst AuditLog = (()=>{\n    try {\n        // Check if we're in an environment where mongoose.models is available\n        if ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models) && (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).AuditLog) {\n            return (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).AuditLog;\n        }\n        return mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"AuditLog\", AuditLogSchema);\n    } catch (error) {\n        // In edge runtime or other environments where mongoose.models is not available\n        // Return a mock model that won't break the import\n        return null;\n    }\n})();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AuditLog);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvQXVkaXRMb2cudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBc0Q7QUFhdEQsTUFBTUUsaUJBQWlCLElBQUlELDRDQUFNQSxDQUMvQjtJQUNFRSxRQUFRO1FBQ05DLE1BQU1ILDRDQUFNQSxDQUFDSSxLQUFLLENBQUNDLFFBQVE7UUFDM0JDLEtBQUs7UUFDTEMsVUFBVTtJQUNaO0lBQ0FDLFFBQVE7UUFDTkwsTUFBTU07UUFDTkYsVUFBVTtRQUNWRyxPQUFPO0lBQ1Q7SUFDQUMsVUFBVTtRQUNSUixNQUFNSCw0Q0FBTUEsQ0FBQ0ksS0FBSyxDQUFDQyxRQUFRO1FBQzNCSyxPQUFPO0lBQ1Q7SUFDQUUsWUFBWTtRQUNWVCxNQUFNTTtRQUNOQyxPQUFPO0lBQ1Q7SUFDQUcsU0FBUztRQUNQVixNQUFNVztJQUNSO0lBQ0FDLFdBQVc7UUFDVFosTUFBTU07SUFDUjtJQUNBTyxXQUFXO1FBQ1RiLE1BQU1NO0lBQ1I7SUFDQVEsV0FBVztRQUNUZCxNQUFNZTtRQUNOQyxTQUFTRCxLQUFLRSxHQUFHO0lBQ25CO0FBQ0YsR0FDQTtJQUNFQyxZQUFZO0FBQ2Q7QUFHRiwyQ0FBMkM7QUFDcEMsTUFBTUMsZUFBZTtJQUMxQix5QkFBeUI7SUFDekJDLE9BQU87SUFDUEMsUUFBUTtJQUNSQyxjQUFjO0lBQ2RDLGtCQUFrQjtJQUNsQkMsMEJBQTBCO0lBQzFCQywwQkFBMEI7SUFFMUIsdUJBQXVCO0lBQ3ZCQyxjQUFjO0lBQ2RDLGNBQWM7SUFDZEMsY0FBYztJQUVkLGtCQUFrQjtJQUNsQkMsaUJBQWlCO0lBQ2pCQyxpQkFBaUI7SUFDakJDLG1CQUFtQjtJQUNuQkMsbUJBQW1CO0lBRW5CLGtCQUFrQjtJQUNsQkMsaUJBQWlCO0lBQ2pCQyxpQkFBaUI7SUFDakJDLGlCQUFpQjtJQUVqQixnQkFBZ0I7SUFDaEJDLGlCQUFpQjtJQUNqQkMsY0FBYztBQUNoQixFQUFFO0FBRUYsb0NBQW9DO0FBQzdCLE1BQU1DLGlCQUFpQixPQUM1QnZDLFFBQ0FNLFFBQ0FrQztJQVFBLElBQUk7UUFDRix1Q0FBdUM7UUFDdkMsSUFBSSxDQUFDQyxVQUFVO1lBQ2IsT0FBTztRQUNUO1FBRUEsT0FBTyxNQUFNQSxTQUFTQyxNQUFNLENBQUM7WUFDM0IxQztZQUNBTTtZQUNBLEdBQUdrQyxJQUFJO1FBQ1Q7SUFDRixFQUFFLE9BQU9HLE9BQU87UUFDZCx5RUFBeUU7UUFDekUsT0FBTztJQUNUO0FBQ0YsRUFBRTtBQUVGLGtFQUFrRTtBQUNsRSxNQUFNRixXQUE2QyxDQUFDO0lBQ2xELElBQUk7UUFDRixzRUFBc0U7UUFDdEUsSUFBSTVDLHdEQUFlLElBQUlBLHdEQUFlLENBQUM0QyxRQUFRLEVBQUU7WUFDL0MsT0FBTzVDLHdEQUFlLENBQUM0QyxRQUFRO1FBQ2pDO1FBQ0EsT0FBTzVDLHFEQUFjLENBQVksWUFBWUU7SUFDL0MsRUFBRSxPQUFPNEMsT0FBTztRQUNkLCtFQUErRTtRQUMvRSxrREFBa0Q7UUFDbEQsT0FBTztJQUNUO0FBQ0Y7QUFFQSxpRUFBZUYsUUFBUUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL21hY2Jvb2svRGVza3RvcC9wZXJzb25hbC13b3Jrc3BhY2UvY2l2aXgvbW9kZWxzL0F1ZGl0TG9nLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBEb2N1bWVudCwgU2NoZW1hIH0gZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUF1ZGl0TG9nIGV4dGVuZHMgRG9jdW1lbnQge1xuICB1c2VySWQ6IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkO1xuICBhY3Rpb246IHN0cmluZztcbiAgZW50aXR5SWQ/OiBtb25nb29zZS5UeXBlcy5PYmplY3RJZDtcbiAgZW50aXR5VHlwZT86IHN0cmluZztcbiAgZGV0YWlscz86IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIGlwQWRkcmVzcz86IHN0cmluZztcbiAgdXNlckFnZW50Pzogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IERhdGU7XG59XG5cbmNvbnN0IEF1ZGl0TG9nU2NoZW1hID0gbmV3IFNjaGVtYShcbiAge1xuICAgIHVzZXJJZDoge1xuICAgICAgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuICAgICAgcmVmOiBcIlVzZXJcIixcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG4gICAgYWN0aW9uOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIGluZGV4OiB0cnVlLFxuICAgIH0sXG4gICAgZW50aXR5SWQ6IHtcbiAgICAgIHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgIGluZGV4OiB0cnVlLFxuICAgIH0sXG4gICAgZW50aXR5VHlwZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IHRydWUsXG4gICAgfSxcbiAgICBkZXRhaWxzOiB7XG4gICAgICB0eXBlOiBPYmplY3QsXG4gICAgfSxcbiAgICBpcEFkZHJlc3M6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICB9LFxuICAgIHVzZXJBZ2VudDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgIH0sXG4gICAgY3JlYXRlZEF0OiB7XG4gICAgICB0eXBlOiBEYXRlLFxuICAgICAgZGVmYXVsdDogRGF0ZS5ub3csXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRpbWVzdGFtcHM6IGZhbHNlLCAvLyBXZSBvbmx5IGNhcmUgYWJvdXQgY3JlYXRpb24gdGltZVxuICB9XG4pO1xuXG4vLyBEZWZpbmUgY29tbW9uIGF1ZGl0IGFjdGlvbnMgYXMgY29uc3RhbnRzXG5leHBvcnQgY29uc3QgQXVkaXRBY3Rpb25zID0ge1xuICAvLyBBdXRoZW50aWNhdGlvbiBhY3Rpb25zXG4gIExPR0lOOiBcIkxPR0lOXCIsXG4gIExPR09VVDogXCJMT0dPVVRcIixcbiAgTE9HSU5fRkFJTEVEOiBcIkxPR0lOX0ZBSUxFRFwiLFxuICBQQVNTV09SRF9DSEFOR0VEOiBcIlBBU1NXT1JEX0NIQU5HRURcIixcbiAgUEFTU1dPUkRfUkVTRVRfUkVRVUVTVEVEOiBcIlBBU1NXT1JEX1JFU0VUX1JFUVVFU1RFRFwiLFxuICBQQVNTV09SRF9SRVNFVF9DT01QTEVURUQ6IFwiUEFTU1dPUkRfUkVTRVRfQ09NUExFVEVEXCIsXG4gIFxuICAvLyBVc2VyIGFjY291bnQgYWN0aW9uc1xuICBVU0VSX0NSRUFURUQ6IFwiVVNFUl9DUkVBVEVEXCIsXG4gIFVTRVJfVVBEQVRFRDogXCJVU0VSX1VQREFURURcIixcbiAgVVNFUl9ERUxFVEVEOiBcIlVTRVJfREVMRVRFRFwiLFxuICBcbiAgLy8gQm9va2luZyBhY3Rpb25zXG4gIEJPT0tJTkdfQ1JFQVRFRDogXCJCT09LSU5HX0NSRUFURURcIixcbiAgQk9PS0lOR19VUERBVEVEOiBcIkJPT0tJTkdfVVBEQVRFRFwiLFxuICBCT09LSU5HX0NBTkNFTExFRDogXCJCT09LSU5HX0NBTkNFTExFRFwiLFxuICBCT09LSU5HX0NPTVBMRVRFRDogXCJCT09LSU5HX0NPTVBMRVRFRFwiLFxuICBcbiAgLy8gU2VydmljZSBhY3Rpb25zXG4gIFNFUlZJQ0VfQ1JFQVRFRDogXCJTRVJWSUNFX0NSRUFURURcIixcbiAgU0VSVklDRV9VUERBVEVEOiBcIlNFUlZJQ0VfVVBEQVRFRFwiLFxuICBTRVJWSUNFX0RFTEVURUQ6IFwiU0VSVklDRV9ERUxFVEVEXCIsXG4gIFxuICAvLyBBZG1pbiBhY3Rpb25zXG4gIFNFVFRJTkdfQ0hBTkdFRDogXCJTRVRUSU5HX0NIQU5HRURcIixcbiAgUk9MRV9DSEFOR0VEOiBcIlJPTEVfQ0hBTkdFRFwiLFxufTtcblxuLy8gQ3JlYXRlIGF1ZGl0IGxvZyB1dGlsaXR5IGZ1bmN0aW9uXG5leHBvcnQgY29uc3QgY3JlYXRlQXVkaXRMb2cgPSBhc3luYyAoXG4gIHVzZXJJZDogc3RyaW5nIHwgbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQsXG4gIGFjdGlvbjogc3RyaW5nLFxuICBkYXRhOiB7XG4gICAgZW50aXR5SWQ/OiBzdHJpbmcgfCBtb25nb29zZS5UeXBlcy5PYmplY3RJZDtcbiAgICBlbnRpdHlUeXBlPzogc3RyaW5nO1xuICAgIGRldGFpbHM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIGlwQWRkcmVzcz86IHN0cmluZztcbiAgICB1c2VyQWdlbnQ/OiBzdHJpbmc7XG4gIH1cbikgPT4ge1xuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIEF1ZGl0TG9nIG1vZGVsIGlzIGF2YWlsYWJsZVxuICAgIGlmICghQXVkaXRMb2cpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYXdhaXQgQXVkaXRMb2cuY3JlYXRlKHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIGFjdGlvbixcbiAgICAgIC4uLmRhdGEsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gTm9uLWJsb2NraW5nIC0gd2UgZG9uJ3Qgd2FudCB0byBmYWlsIG9wZXJhdGlvbnMgaWYgYXVkaXQgbG9nZ2luZyBmYWlsc1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG4vLyBTYWZlIG1vZGVsIGNyZWF0aW9uIHRoYXQgd29ya3MgaW4gYm90aCBOb2RlLmpzIGFuZCBFZGdlIHJ1bnRpbWVcbmNvbnN0IEF1ZGl0TG9nOiBtb25nb29zZS5Nb2RlbDxJQXVkaXRMb2c+IHwgbnVsbCA9ICgoKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgd2UncmUgaW4gYW4gZW52aXJvbm1lbnQgd2hlcmUgbW9uZ29vc2UubW9kZWxzIGlzIGF2YWlsYWJsZVxuICAgIGlmIChtb25nb29zZS5tb2RlbHMgJiYgbW9uZ29vc2UubW9kZWxzLkF1ZGl0TG9nKSB7XG4gICAgICByZXR1cm4gbW9uZ29vc2UubW9kZWxzLkF1ZGl0TG9nIGFzIG1vbmdvb3NlLk1vZGVsPElBdWRpdExvZz47XG4gICAgfVxuICAgIHJldHVybiBtb25nb29zZS5tb2RlbDxJQXVkaXRMb2c+KFwiQXVkaXRMb2dcIiwgQXVkaXRMb2dTY2hlbWEpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vIEluIGVkZ2UgcnVudGltZSBvciBvdGhlciBlbnZpcm9ubWVudHMgd2hlcmUgbW9uZ29vc2UubW9kZWxzIGlzIG5vdCBhdmFpbGFibGVcbiAgICAvLyBSZXR1cm4gYSBtb2NrIG1vZGVsIHRoYXQgd29uJ3QgYnJlYWsgdGhlIGltcG9ydFxuICAgIHJldHVybiBudWxsO1xuICB9XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBBdWRpdExvZzsgIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwiQXVkaXRMb2dTY2hlbWEiLCJ1c2VySWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwiYWN0aW9uIiwiU3RyaW5nIiwiaW5kZXgiLCJlbnRpdHlJZCIsImVudGl0eVR5cGUiLCJkZXRhaWxzIiwiT2JqZWN0IiwiaXBBZGRyZXNzIiwidXNlckFnZW50IiwiY3JlYXRlZEF0IiwiRGF0ZSIsImRlZmF1bHQiLCJub3ciLCJ0aW1lc3RhbXBzIiwiQXVkaXRBY3Rpb25zIiwiTE9HSU4iLCJMT0dPVVQiLCJMT0dJTl9GQUlMRUQiLCJQQVNTV09SRF9DSEFOR0VEIiwiUEFTU1dPUkRfUkVTRVRfUkVRVUVTVEVEIiwiUEFTU1dPUkRfUkVTRVRfQ09NUExFVEVEIiwiVVNFUl9DUkVBVEVEIiwiVVNFUl9VUERBVEVEIiwiVVNFUl9ERUxFVEVEIiwiQk9PS0lOR19DUkVBVEVEIiwiQk9PS0lOR19VUERBVEVEIiwiQk9PS0lOR19DQU5DRUxMRUQiLCJCT09LSU5HX0NPTVBMRVRFRCIsIlNFUlZJQ0VfQ1JFQVRFRCIsIlNFUlZJQ0VfVVBEQVRFRCIsIlNFUlZJQ0VfREVMRVRFRCIsIlNFVFRJTkdfQ0hBTkdFRCIsIlJPTEVfQ0hBTkdFRCIsImNyZWF0ZUF1ZGl0TG9nIiwiZGF0YSIsIkF1ZGl0TG9nIiwiY3JlYXRlIiwiZXJyb3IiLCJtb2RlbHMiLCJtb2RlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./models/AuditLog.ts\n");

/***/ }),

/***/ "(rsc)/./models/User.ts":
/*!************************!*\
  !*** ./models/User.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n\n\n// Settings schemas\nconst NotificationSettingsSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    email: {\n        type: Boolean,\n        default: true\n    },\n    sms: {\n        type: Boolean,\n        default: false\n    },\n    marketing: {\n        type: Boolean,\n        default: false\n    },\n    reminders: {\n        type: Boolean,\n        default: true\n    }\n}, {\n    _id: false\n});\nconst AppearanceSettingsSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    theme: {\n        type: String,\n        enum: [\n            'light',\n            'dark',\n            'system'\n        ],\n        default: 'system'\n    },\n    fontSize: {\n        type: String,\n        enum: [\n            'small',\n            'medium',\n            'large'\n        ],\n        default: 'medium'\n    },\n    reduceAnimations: {\n        type: Boolean,\n        default: false\n    },\n    highContrast: {\n        type: Boolean,\n        default: false\n    }\n}, {\n    _id: false\n});\nconst PrivacySettingsSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    profileVisibility: {\n        type: String,\n        enum: [\n            'public',\n            'contacts',\n            'private'\n        ],\n        default: 'public'\n    },\n    shareBookingHistory: {\n        type: Boolean,\n        default: false\n    },\n    shareContactInfo: {\n        type: Boolean,\n        default: false\n    },\n    allowDataCollection: {\n        type: Boolean,\n        default: true\n    }\n}, {\n    _id: false\n});\nconst UserSettingsSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    notifications: {\n        type: NotificationSettingsSchema,\n        default: ()=>({})\n    },\n    appearance: {\n        type: AppearanceSettingsSchema,\n        default: ()=>({})\n    },\n    privacy: {\n        type: PrivacySettingsSchema,\n        default: ()=>({})\n    }\n}, {\n    _id: false\n});\nconst UserSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    name: {\n        type: String,\n        required: true\n    },\n    email: {\n        type: String,\n        required: true\n    },\n    password: {\n        type: String,\n        required: true\n    },\n    role: {\n        type: String,\n        required: true,\n        enum: [\n            \"USER\",\n            \"AGENT\",\n            \"ADMIN\",\n            \"SUPER_ADMIN\"\n        ],\n        default: \"USER\"\n    },\n    phone: {\n        type: String\n    },\n    address: {\n        type: String\n    },\n    isActive: {\n        type: Boolean,\n        default: true\n    },\n    settings: {\n        type: UserSettingsSchema,\n        default: ()=>({})\n    },\n    lastLogin: {\n        type: Date\n    },\n    resetPasswordToken: {\n        type: String\n    },\n    resetPasswordExpires: {\n        type: Date\n    }\n}, {\n    timestamps: true\n});\n// Hash password before saving\nUserSchema.pre(\"save\", async function(next) {\n    if (!this.isModified(\"password\")) return next();\n    try {\n        const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].genSalt(10);\n        this.password = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(this.password, salt);\n        next();\n    } catch (error) {\n        next(error);\n    }\n});\n// Compare password method\nUserSchema.methods.comparePassword = async function(candidatePassword) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].compare(candidatePassword, this.password);\n};\n// Only run indexing on server side to avoid browser warnings\nif (true) {\n    // Create indexes for better query performance\n    UserSchema.index({\n        email: 1\n    }, {\n        unique: true\n    });\n    UserSchema.index({\n        role: 1\n    });\n    UserSchema.index({\n        resetPasswordToken: 1\n    });\n}\n// Prevent model compilation error in development due to hot reloading\nlet User;\nif ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models) && (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User) {\n    User = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User;\n} else {\n    User = mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"User\", UserSchema);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (User);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRLEdBQUcsTUFBTTdCLHFEQUFXLENBQUMsSUFBSSxDQUFDNkIsUUFBUSxFQUFFYztRQUNqREY7SUFDRixFQUFFLE9BQU9LLE9BQVk7UUFDbkJMLEtBQUtLO0lBQ1A7QUFDRjtBQUVBLDBCQUEwQjtBQUMxQnBCLFdBQVdxQixPQUFPLENBQUNDLGVBQWUsR0FBRyxlQUFlQyxpQkFBeUI7SUFDM0UsT0FBT2pELHdEQUFjLENBQUNpRCxtQkFBbUIsSUFBSSxDQUFDcEIsUUFBUTtBQUN4RDtBQUVBLDZEQUE2RDtBQUM3RCxJQUFJLElBQTZCLEVBQUU7SUFDakMsOENBQThDO0lBQzlDSCxXQUFXeUIsS0FBSyxDQUFDO1FBQUVqRCxPQUFPO0lBQUUsR0FBRztRQUFFa0QsUUFBUTtJQUFLO0lBQzlDMUIsV0FBV3lCLEtBQUssQ0FBQztRQUFFckIsTUFBTTtJQUFFO0lBQzNCSixXQUFXeUIsS0FBSyxDQUFDO1FBQUVkLG9CQUFvQjtJQUFFO0FBQzNDO0FBRUEsc0VBQXNFO0FBQ3RFLElBQUlnQjtBQUVKLElBQUl2RCx3REFBZSxJQUFJQSx3REFBZSxDQUFDdUQsSUFBSSxFQUFFO0lBQzNDQSxPQUFPdkQsd0RBQWUsQ0FBQ3VELElBQUk7QUFDN0IsT0FBTztJQUNMQSxPQUFPdkQscURBQWMsQ0FBUSxRQUFRNEI7QUFDdkM7QUFFQSxpRUFBZTJCLElBQUlBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWNib29rL0Rlc2t0b3AvcGVyc29uYWwtd29ya3NwYWNlL2Npdml4L21vZGVscy9Vc2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBTY2hlbWEsIERvY3VtZW50LCBNb2RlbCB9IGZyb20gXCJtb25nb29zZVwiO1xuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIjtcblxuLy8gU2V0dGluZ3MgaW50ZXJmYWNlc1xuZXhwb3J0IGludGVyZmFjZSBJTm90aWZpY2F0aW9uU2V0dGluZ3Mge1xuICBlbWFpbDogYm9vbGVhbjtcbiAgc21zOiBib29sZWFuO1xuICBtYXJrZXRpbmc6IGJvb2xlYW47XG4gIHJlbWluZGVyczogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQXBwZWFyYW5jZVNldHRpbmdzIHtcbiAgdGhlbWU6ICdsaWdodCcgfCAnZGFyaycgfCAnc3lzdGVtJztcbiAgZm9udFNpemU6ICdzbWFsbCcgfCAnbWVkaXVtJyB8ICdsYXJnZSc7XG4gIHJlZHVjZUFuaW1hdGlvbnM6IGJvb2xlYW47XG4gIGhpZ2hDb250cmFzdDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUHJpdmFjeVNldHRpbmdzIHtcbiAgcHJvZmlsZVZpc2liaWxpdHk6ICdwdWJsaWMnIHwgJ2NvbnRhY3RzJyB8ICdwcml2YXRlJztcbiAgc2hhcmVCb29raW5nSGlzdG9yeTogYm9vbGVhbjtcbiAgc2hhcmVDb250YWN0SW5mbzogYm9vbGVhbjtcbiAgYWxsb3dEYXRhQ29sbGVjdGlvbjogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJVXNlclNldHRpbmdzIHtcbiAgbm90aWZpY2F0aW9uczogSU5vdGlmaWNhdGlvblNldHRpbmdzO1xuICBhcHBlYXJhbmNlOiBJQXBwZWFyYW5jZVNldHRpbmdzO1xuICBwcml2YWN5OiBJUHJpdmFjeVNldHRpbmdzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElVc2VyIGV4dGVuZHMgRG9jdW1lbnQge1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG4gIHJvbGU6IFwiVVNFUlwiIHwgXCJBR0VOVFwiIHwgXCJBRE1JTlwiIHwgXCJTVVBFUl9BRE1JTlwiO1xuICBwaG9uZT86IHN0cmluZztcbiAgYWRkcmVzcz86IHN0cmluZztcbiAgaXNBY3RpdmU6IGJvb2xlYW47XG4gIHNldHRpbmdzPzogSVVzZXJTZXR0aW5ncztcbiAgbGFzdExvZ2luPzogRGF0ZTtcbiAgcmVzZXRQYXNzd29yZFRva2VuPzogc3RyaW5nO1xuICByZXNldFBhc3N3b3JkRXhwaXJlcz86IERhdGU7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xuICBjb21wYXJlUGFzc3dvcmQoY2FuZGlkYXRlUGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj47XG59XG5cbi8vIFNldHRpbmdzIHNjaGVtYXNcbmNvbnN0IE5vdGlmaWNhdGlvblNldHRpbmdzU2NoZW1hID0gbmV3IFNjaGVtYTxJTm90aWZpY2F0aW9uU2V0dGluZ3M+KHtcbiAgZW1haWw6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogdHJ1ZSB9LFxuICBzbXM6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcbiAgbWFya2V0aW5nOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXG4gIHJlbWluZGVyczogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH1cbn0sIHsgX2lkOiBmYWxzZSB9KTtcblxuY29uc3QgQXBwZWFyYW5jZVNldHRpbmdzU2NoZW1hID0gbmV3IFNjaGVtYTxJQXBwZWFyYW5jZVNldHRpbmdzPih7XG4gIHRoZW1lOiB7IHR5cGU6IFN0cmluZywgZW51bTogWydsaWdodCcsICdkYXJrJywgJ3N5c3RlbSddLCBkZWZhdWx0OiAnc3lzdGVtJyB9LFxuICBmb250U2l6ZTogeyB0eXBlOiBTdHJpbmcsIGVudW06IFsnc21hbGwnLCAnbWVkaXVtJywgJ2xhcmdlJ10sIGRlZmF1bHQ6ICdtZWRpdW0nIH0sXG4gIHJlZHVjZUFuaW1hdGlvbnM6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcbiAgaGlnaENvbnRyYXN0OiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH1cbn0sIHsgX2lkOiBmYWxzZSB9KTtcblxuY29uc3QgUHJpdmFjeVNldHRpbmdzU2NoZW1hID0gbmV3IFNjaGVtYTxJUHJpdmFjeVNldHRpbmdzPih7XG4gIHByb2ZpbGVWaXNpYmlsaXR5OiB7IHR5cGU6IFN0cmluZywgZW51bTogWydwdWJsaWMnLCAnY29udGFjdHMnLCAncHJpdmF0ZSddLCBkZWZhdWx0OiAncHVibGljJyB9LFxuICBzaGFyZUJvb2tpbmdIaXN0b3J5OiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXG4gIHNoYXJlQ29udGFjdEluZm86IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcbiAgYWxsb3dEYXRhQ29sbGVjdGlvbjogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH1cbn0sIHsgX2lkOiBmYWxzZSB9KTtcblxuY29uc3QgVXNlclNldHRpbmdzU2NoZW1hID0gbmV3IFNjaGVtYTxJVXNlclNldHRpbmdzPih7XG4gIG5vdGlmaWNhdGlvbnM6IHsgdHlwZTogTm90aWZpY2F0aW9uU2V0dGluZ3NTY2hlbWEsIGRlZmF1bHQ6ICgpID0+ICh7fSkgfSxcbiAgYXBwZWFyYW5jZTogeyB0eXBlOiBBcHBlYXJhbmNlU2V0dGluZ3NTY2hlbWEsIGRlZmF1bHQ6ICgpID0+ICh7fSkgfSxcbiAgcHJpdmFjeTogeyB0eXBlOiBQcml2YWN5U2V0dGluZ3NTY2hlbWEsIGRlZmF1bHQ6ICgpID0+ICh7fSkgfVxufSwgeyBfaWQ6IGZhbHNlIH0pO1xuXG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IFNjaGVtYTxJVXNlcj4oXG4gIHtcbiAgICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBlbWFpbDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgcGFzc3dvcmQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHJvbGU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgZW51bTogW1wiVVNFUlwiLCBcIkFHRU5UXCIsIFwiQURNSU5cIiwgXCJTVVBFUl9BRE1JTlwiXSxcbiAgICAgIGRlZmF1bHQ6IFwiVVNFUlwiXG4gICAgfSxcbiAgICBwaG9uZTogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICBhZGRyZXNzOiB7IHR5cGU6IFN0cmluZyB9LFxuICAgIGlzQWN0aXZlOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IHRydWUgfSxcbiAgICBzZXR0aW5nczogeyB0eXBlOiBVc2VyU2V0dGluZ3NTY2hlbWEsIGRlZmF1bHQ6ICgpID0+ICh7fSkgfSxcbiAgICBsYXN0TG9naW46IHsgdHlwZTogRGF0ZSB9LFxuICAgIHJlc2V0UGFzc3dvcmRUb2tlbjogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICByZXNldFBhc3N3b3JkRXhwaXJlczogeyB0eXBlOiBEYXRlIH0sXG4gIH0sXG4gIHsgdGltZXN0YW1wczogdHJ1ZSB9XG4pO1xuXG4vLyBIYXNoIHBhc3N3b3JkIGJlZm9yZSBzYXZpbmdcblVzZXJTY2hlbWEucHJlKFwic2F2ZVwiLCBhc3luYyBmdW5jdGlvbihuZXh0KSB7XG4gIGlmICghdGhpcy5pc01vZGlmaWVkKFwicGFzc3dvcmRcIikpIHJldHVybiBuZXh0KCk7XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdCgxMCk7XG4gICAgdGhpcy5wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHRoaXMucGFzc3dvcmQsIHNhbHQpO1xuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIG5leHQoZXJyb3IpO1xuICB9XG59KTtcblxuLy8gQ29tcGFyZSBwYXNzd29yZCBtZXRob2RcblVzZXJTY2hlbWEubWV0aG9kcy5jb21wYXJlUGFzc3dvcmQgPSBhc3luYyBmdW5jdGlvbihjYW5kaWRhdGVQYXNzd29yZDogc3RyaW5nKSB7XG4gIHJldHVybiBiY3J5cHQuY29tcGFyZShjYW5kaWRhdGVQYXNzd29yZCwgdGhpcy5wYXNzd29yZCk7XG59O1xuXG4vLyBPbmx5IHJ1biBpbmRleGluZyBvbiBzZXJ2ZXIgc2lkZSB0byBhdm9pZCBicm93c2VyIHdhcm5pbmdzXG5pZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgLy8gQ3JlYXRlIGluZGV4ZXMgZm9yIGJldHRlciBxdWVyeSBwZXJmb3JtYW5jZVxuICBVc2VyU2NoZW1hLmluZGV4KHsgZW1haWw6IDEgfSwgeyB1bmlxdWU6IHRydWUgfSk7XG4gIFVzZXJTY2hlbWEuaW5kZXgoeyByb2xlOiAxIH0pO1xuICBVc2VyU2NoZW1hLmluZGV4KHsgcmVzZXRQYXNzd29yZFRva2VuOiAxIH0pO1xufVxuXG4vLyBQcmV2ZW50IG1vZGVsIGNvbXBpbGF0aW9uIGVycm9yIGluIGRldmVsb3BtZW50IGR1ZSB0byBob3QgcmVsb2FkaW5nXG5sZXQgVXNlcjogTW9kZWw8SVVzZXI+O1xuXG5pZiAobW9uZ29vc2UubW9kZWxzICYmIG1vbmdvb3NlLm1vZGVscy5Vc2VyKSB7XG4gIFVzZXIgPSBtb25nb29zZS5tb2RlbHMuVXNlciBhcyBNb2RlbDxJVXNlcj47XG59IGVsc2Uge1xuICBVc2VyID0gbW9uZ29vc2UubW9kZWw8SVVzZXI+KFwiVXNlclwiLCBVc2VyU2NoZW1hKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlcjsiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJTY2hlbWEiLCJiY3J5cHQiLCJOb3RpZmljYXRpb25TZXR0aW5nc1NjaGVtYSIsImVtYWlsIiwidHlwZSIsIkJvb2xlYW4iLCJkZWZhdWx0Iiwic21zIiwibWFya2V0aW5nIiwicmVtaW5kZXJzIiwiX2lkIiwiQXBwZWFyYW5jZVNldHRpbmdzU2NoZW1hIiwidGhlbWUiLCJTdHJpbmciLCJlbnVtIiwiZm9udFNpemUiLCJyZWR1Y2VBbmltYXRpb25zIiwiaGlnaENvbnRyYXN0IiwiUHJpdmFjeVNldHRpbmdzU2NoZW1hIiwicHJvZmlsZVZpc2liaWxpdHkiLCJzaGFyZUJvb2tpbmdIaXN0b3J5Iiwic2hhcmVDb250YWN0SW5mbyIsImFsbG93RGF0YUNvbGxlY3Rpb24iLCJVc2VyU2V0dGluZ3NTY2hlbWEiLCJub3RpZmljYXRpb25zIiwiYXBwZWFyYW5jZSIsInByaXZhY3kiLCJVc2VyU2NoZW1hIiwibmFtZSIsInJlcXVpcmVkIiwicGFzc3dvcmQiLCJyb2xlIiwicGhvbmUiLCJhZGRyZXNzIiwiaXNBY3RpdmUiLCJzZXR0aW5ncyIsImxhc3RMb2dpbiIsIkRhdGUiLCJyZXNldFBhc3N3b3JkVG9rZW4iLCJyZXNldFBhc3N3b3JkRXhwaXJlcyIsInRpbWVzdGFtcHMiLCJwcmUiLCJuZXh0IiwiaXNNb2RpZmllZCIsInNhbHQiLCJnZW5TYWx0IiwiaGFzaCIsImVycm9yIiwibWV0aG9kcyIsImNvbXBhcmVQYXNzd29yZCIsImNhbmRpZGF0ZVBhc3N3b3JkIiwiY29tcGFyZSIsImluZGV4IiwidW5pcXVlIiwiVXNlciIsIm1vZGVscyIsIm1vZGVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./models/User.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDesktop%2Fpersonal-workspace%2Fcivix%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDesktop%2Fpersonal-workspace%2Fcivix&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDesktop%2Fpersonal-workspace%2Fcivix%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDesktop%2Fpersonal-workspace%2Fcivix&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _Users_macbook_Desktop_personal_workspace_civix_app_api_auth_nextauth_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/auth/[...nextauth]/route.ts */ \"(rsc)/./app/api/auth/[...nextauth]/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/[...nextauth]/route\",\n        pathname: \"/api/auth/[...nextauth]\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/[...nextauth]/route\"\n    },\n    distDir: \".next\" || 0,\n    projectDir:  false || '',\n    resolvedPagePath: \"/Users/macbook/Desktop/personal-workspace/civix/app/api/auth/[...nextauth]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_macbook_Desktop_personal_workspace_civix_app_api_auth_nextauth_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/auth/[...nextauth]/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = \"false\";\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                dynamicIO: Boolean(nextConfig.experimental.dynamicIO),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGJTVCLi4ubmV4dGF1dGglNUQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkYlNUIuLi5uZXh0YXV0aCU1RCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkYlNUIuLi5uZXh0YXV0aCU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1hY2Jvb2slMkZEZXNrdG9wJTJGcGVyc29uYWwtd29ya3NwYWNlJTJGY2l2aXglMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbWFjYm9vayUyRkRlc2t0b3AlMkZwZXJzb25hbC13b3Jrc3BhY2UlMkZjaXZpeCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD1zdGFuZGFsb25lJnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QmaXNHbG9iYWxOb3RGb3VuZEVuYWJsZWQ9ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNkO0FBQ1M7QUFDTztBQUNLO0FBQ21DO0FBQ2pEO0FBQ087QUFDZjtBQUNzQztBQUN6QjtBQUNNO0FBQ0M7QUFDaEI7QUFDOEM7QUFDaEg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsYUFBYSxPQUFvQyxJQUFJ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QUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QywwRkFBcUI7QUFDbEU7QUFDQSxrQkFBa0IsNkVBQVk7QUFDOUI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJGQUFtQjtBQUNyRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2RUFBWTtBQUMxQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgeyBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xuaW1wb3J0IHsgTm9kZU5leHRSZXF1ZXN0LCBOb2RlTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYmFzZS1odHRwL25vZGVcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0QWRhcHRlciwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9uZXh0LXJlcXVlc3RcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0UmV2YWxpZGF0ZVJlYXNvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2luc3RydW1lbnRhdGlvbi91dGlsc1wiO1xuaW1wb3J0IHsgc2VuZFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1yZXNwb25zZVwiO1xuaW1wb3J0IHsgZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzLCB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRDYWNoZUNvbnRyb2xIZWFkZXIgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvY2FjaGUtY29udHJvbFwiO1xuaW1wb3J0IHsgSU5GSU5JVEVfQ0FDSEUsIE5FWFRfQ0FDSEVfVEFHU19IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvbWFjYm9vay9EZXNrdG9wL3BlcnNvbmFsLXdvcmtzcGFjZS9jaXZpeC9hcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJzdGFuZGFsb25lXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2F1dGgvWy4uLm5leHRhdXRoXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdL3JvdXRlXCJcbiAgICB9LFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICBwcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJycsXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvbWFjYm9vay9EZXNrdG9wL3BlcnNvbmFsLXdvcmtzcGFjZS9jaXZpeC9hcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICB2YXIgX25leHRDb25maWdfZXhwZXJpbWVudGFsO1xuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XG4gICAgICAgIC8vIHdlIGFsd2F5cyBub3JtYWxpemUgL2luZGV4IHNwZWNpZmljYWxseVxuICAgICAgICBzcmNQYWdlID0gJy8nO1xuICAgIH1cbiAgICBjb25zdCBtdWx0aVpvbmVEcmFmdE1vZGUgPSBwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFO1xuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2UsXG4gICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBwYXJhbXMsIG5leHRDb25maWcsIGlzRHJhZnRNb2RlLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCwgaXNPbkRlbWFuZFJldmFsaWRhdGUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByZXNvbHZlZFBhdGhuYW1lIH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTcmNQYWdlID0gbm9ybWFsaXplQXBwUGF0aChzcmNQYWdlKTtcbiAgICBsZXQgaXNJc3IgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdIHx8IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgaWYgKGlzSXNyICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjb25zdCBpc1ByZXJlbmRlcmVkID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgICAgICBjb25zdCBwcmVyZW5kZXJJbmZvID0gcHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV07XG4gICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XG4gICAgICAgICAgICBpZiAocHJlcmVuZGVySW5mby5mYWxsYmFjayA9PT0gZmFsc2UgJiYgIWlzUHJlcmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9GYWxsYmFja0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGNhY2hlS2V5ID0gbnVsbDtcbiAgICBpZiAoaXNJc3IgJiYgIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjYWNoZUtleSA9IHJlc29sdmVkUGF0aG5hbWU7XG4gICAgICAgIC8vIGVuc3VyZSAvaW5kZXggYW5kIC8gaXMgbm9ybWFsaXplZCB0byBvbmUga2V5XG4gICAgICAgIGNhY2hlS2V5ID0gY2FjaGVLZXkgPT09ICcvaW5kZXgnID8gJy8nIDogY2FjaGVLZXk7XG4gICAgfVxuICAgIGNvbnN0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTFxuICAgIHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlIHx8IC8vIElmIHRoaXMgaXMgbm90IFNTRyBvciBkb2VzIG5vdCBoYXZlIHN0YXRpYyBwYXRocywgdGhlbiBpdCBzdXBwb3J0c1xuICAgIC8vIGR5bmFtaWMgSFRNTC5cbiAgICAhaXNJc3I7XG4gICAgLy8gVGhpcyBpcyBhIHJldmFsaWRhdGlvbiByZXF1ZXN0IGlmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpY1xuICAgIC8vIHBhZ2UgYW5kIGl0IGlzIG5vdCBiZWluZyByZXN1bWVkIGZyb20gYSBwb3N0cG9uZWQgcmVuZGVyIGFuZFxuICAgIC8vIGl0IGlzIG5vdCBhIGR5bmFtaWMgUlNDIHJlcXVlc3QgdGhlbiBpdCBpcyBhIHJldmFsaWRhdGlvblxuICAgIC8vIHJlcXVlc3QuXG4gICAgY29uc3QgaXNSZXZhbGlkYXRlID0gaXNJc3IgJiYgIXN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlO1xuICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICByZW5kZXJPcHRzOiB7XG4gICAgICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgICAgICBkeW5hbWljSU86IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuZHluYW1pY0lPKSxcbiAgICAgICAgICAgICAgICBhdXRoSW50ZXJydXB0czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hdXRoSW50ZXJydXB0cylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiAoX25leHRDb25maWdfZXhwZXJpbWVudGFsID0gbmV4dENvbmZpZy5leHBlcmltZW50YWwpID09IG51bGwgPyB2b2lkIDAgOiBfbmV4dENvbmZpZ19leHBlcmltZW50YWwuY2FjaGVMaWZlLFxuICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgb25DbG9zZTogKGNiKT0+e1xuICAgICAgICAgICAgICAgIHJlcy5vbignY2xvc2UnLCBjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BZnRlclRhc2tFcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgb25JbnN0cnVtZW50YXRpb25SZXF1ZXN0RXJyb3I6IChlcnJvciwgX3JlcXVlc3QsIGVycm9yQ29udGV4dCk9PnJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyb3IsIGVycm9yQ29udGV4dCwgcm91dGVyU2VydmVyQ29udGV4dClcbiAgICAgICAgfSxcbiAgICAgICAgc2hhcmVkQ29udGV4dDoge1xuICAgICAgICAgICAgYnVpbGRJZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBub2RlTmV4dFJlcSA9IG5ldyBOb2RlTmV4dFJlcXVlc3QocmVxKTtcbiAgICBjb25zdCBub2RlTmV4dFJlcyA9IG5ldyBOb2RlTmV4dFJlc3BvbnNlKHJlcyk7XG4gICAgY29uc3QgbmV4dFJlcSA9IE5leHRSZXF1ZXN0QWRhcHRlci5mcm9tTm9kZU5leHRSZXF1ZXN0KG5vZGVOZXh0UmVxLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlKHJlcykpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT57XG4gICAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUuaGFuZGxlKG5leHRSZXEsIGNvbnRleHQpLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeSB9KT0+e1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsICdSRVZBTElEQVRFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShjdXJyZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1dhaXRVbnRpbCA9IGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsO1xuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHVzaW5nIHByb3ZpZGVkIHdhaXRVbnRpbCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdXYWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHgud2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV2FpdFVudGlsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlVGFncyA9IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWMgcmVzcG9uc2UsIHdlIGNhbiBjYWNoZSBpdCBzbyBsb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lzcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzWydjb250ZW50LXR5cGUnXSAmJiBibG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID49IElORklOSVRFX0NBQ0hFID8gZmFsc2UgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FjaGUgZW50cnkgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIHJlc3BvbnNlIHdpdGhvdXQgY2FjaGluZyBpZiBub3QgSVNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCByZXNwb25zZSwgY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBlcnJvciBoZXJlIGFzIGl0IHdvbid0IGJlIGJ1YmJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGNyZWF0ZSBhIGNhY2hlRW50cnkgZm9yIElTUlxuICAgICAgICAgICAgaWYgKCFpc0lzcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWUxO1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFyaWFudDogYXBwLXJvdXRlIHJlY2VpdmVkIGludmFsaWQgY2FjaGUgZW50cnkgJHtjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUxID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlMS5raW5kfWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTcwMVwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsIGlzT25EZW1hbmRSZXZhbGlkYXRlID8gJ1JFVkFMSURBVEVEJyA6IGNhY2hlRW50cnkuaXNNaXNzID8gJ01JU1MnIDogY2FjaGVFbnRyeS5pc1N0YWxlID8gJ1NUQUxFJyA6ICdISVQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERyYWZ0IG1vZGUgc2hvdWxkIG5ldmVyIGJlIGNhY2hlZFxuICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICdwcml2YXRlLCBuby1jYWNoZSwgbm8tc3RvcmUsIG1heC1hZ2U9MCwgbXVzdC1yZXZhbGlkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKGNhY2hlRW50cnkudmFsdWUuaGVhZGVycyk7XG4gICAgICAgICAgICBpZiAoIShnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzSXNyKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuZGVsZXRlKE5FWFRfQ0FDSEVfVEFHU19IRUFERVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgY2FjaGUgY29udHJvbCBpcyBhbHJlYWR5IHNldCBvbiB0aGUgcmVzcG9uc2Ugd2UgZG9uJ3RcbiAgICAgICAgICAgIC8vIG92ZXJyaWRlIGl0IHRvIGFsbG93IHVzZXJzIHRvIGN1c3RvbWl6ZSBpdCB2aWEgbmV4dC5jb25maWdcbiAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCAmJiAhcmVzLmdldEhlYWRlcignQ2FjaGUtQ29udHJvbCcpICYmICFoZWFkZXJzLmdldCgnQ2FjaGUtQ29udHJvbCcpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBnZXRDYWNoZUNvbnRyb2xIZWFkZXIoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHN0YXR1czogY2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMgfHwgMjAwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gaWYgd2UgYXJlbid0IHdyYXBwZWQgYnkgYmFzZS1zZXJ2ZXIgaGFuZGxlIGhlcmVcbiAgICAgICAgaWYgKCFhY3RpdmVTcGFuKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24sIHRocm93IHRoZSBlcnJvciBhZ2Fpbi5cbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgc2VuZCBhIDUwMCByZXNwb25zZS5cbiAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDesktop%2Fpersonal-workspace%2Fcivix%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDesktop%2Fpersonal-workspace%2Fcivix&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/@auth","vendor-chunks/next-auth","vendor-chunks/jose","vendor-chunks/@panva","vendor-chunks/preact","vendor-chunks/preact-render-to-string","vendor-chunks/oauth4webapi","vendor-chunks/bcryptjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDesktop%2Fpersonal-workspace%2Fcivix%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDesktop%2Fpersonal-workspace%2Fcivix&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();